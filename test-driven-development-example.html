<!DOCTYPE html><html><head><title>Joys Of Apex | Test Driven Development (TDD) Example</title><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"><meta name="robots" content="index,follow"><meta name="theme-color" content="#212121"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><link rel="shortcut icon" href="/joys-of-apex/favicon.ico"><link href="https://fonts.googleapis.com/css?family=Hind:400,700&amp;display=swap" rel="stylesheet"><link href="https://fonts.googleapis.com/css?family=Source+Code+Pro:300,400&amp;display=swap" rel="stylesheet"><link href="https://fonts.googleapis.com/icon?family=Material+Icons|Material+Icons+Outlined" rel="stylesheet"><style>
      body, input, button {
        font-family: 'Hind', sans-serif;
      }

      code, .hljs {
        font-family: 'Source Code Pro', 'Courier New', Courier, monospace;
      }

      .icon-font {
        font-family: 'Material Icons';
        font-weight: normal;
        font-style: normal;
        font-size: 24px;  /* Preferred icon size */
        display: inline-block;
        line-height: 1;
        text-transform: none;
        letter-spacing: normal;
        word-wrap: normal;
        white-space: nowrap;
        direction: ltr;
      
        /* Support for all WebKit browsers. */
        -webkit-font-smoothing: antialiased;
        /* Support for Safari and Chrome. */
        text-rendering: optimizeLegibility;
      
        /* Support for Firefox. */
        -moz-osx-font-smoothing: grayscale;
      
        /* Support for IE. */
        font-feature-settings: 'liga';
      }

      .icon-font.outline {
        font-family: 'Material Icons Outlined';
      }
    </style><link href="/joys-of-apex/styles/codedoc-styles.css" rel="stylesheet"><script async="" defer="" src="/joys-of-apex/bundle/codedoc-bundle.js"></script><meta property="og:image" content="./img/joys-of-apex-thumbnail.png"><script>window.githubConfig={"repo":"james-coding-blog","user":"jamessimone"}</script><style>.container{padding-top: 0 !important}</style><style>#-codedoc-toc { backdrop-filter: blur(16px); -webkit-backdrop-filter: blur(16px) }</style><meta name="twitter:title" content="Joys Of Apex | Test Driven Development (TDD) Example"><meta property="og:type" content="article"><meta property="og:title" content="Joys Of Apex | Test Driven Development (TDD) Example"></head><body><header style="margin-left: 1rem">Read more at <a href="https://wwww.jamessimone.net">jamessimone.net</a>, or return to the <a href="/joys-of-apex/">homepage</a></header><div id="-codedoc-container" class="container"><script>window.source = {"base":"posts","path":"test-driven-development-example.md","namespace":"/joys-of-apex","title":{"base":"Joys Of Apex","connector":" | "}}</script><div class="hero-0-0-8" style="margin-bottom: -156px"><img src="/joys-of-apex/img/the-joys-of-apex.png" class="image-0-0-9" data-hero=""><span class="caption-0-0-10"></span></div><marker><br>
<br>
<br>
<br>
<br>

</marker><h1 class="h-0-0-11 "><span style="color: green; 
      text-shadow: none; 
      font-size: 48px"><p>Test Driven Development (TDD) Example</p></span></h1><script id="iVtcYilfzT">(function(){function load(){if (window.__sdh_transport){window.__sdh_transport("iVtcYilfzT", "kRzsgnV+B7EQTskbovy+YA==", {"src":"github","date":"2020-05-03T15:12:03.284Z"});} }; if (document.readyState == 'complete') load(); else window.addEventListener('load', load); })()</script><div hidden="" data-ignore-text="" data-meta-override-property="og:image"><p>./img/joys-of-apex-thumbnail.png</p></div><p>This series has spent quite a bit of time talking about Test Driven Development (TDD), and has shown many examples along the way. Now I'd like to take a step back; to return to the roots of TDD, both to show why it can be such an effective development strategy, and also to review the fundementals.</p><p>Test Driven Development is guided by the belief that your tests should be self-documenting; that they should be the best place for a new developer to start learning the code base, by assimilating the expectations that the business has in the form of well structured and asserted-for tests. The general workflow when following TDD correctly makes use of the following pattern:</p><ul><li>Red (you write a failing test. Code that fails to compile also counts as a failing test)</li><li>Green (your tests pass)</li><li>Refactor (you took some artistic liberties while doing the initial implementation. Now it's time to clean the code up)</li></ul><p>Correct use of this pattern also passively presents an ancillary principle: that the tests should run fast. Because you're encouraged to move quickly through the cycle, from implementing a failing test to getting the test(s) to pass, to implementing the next piece of acceptance criteria in your feature, you have to be able to move quickly in order to be able to iterate effectively. Detractors of TDD often point to the stringent "write a failing test before producing production-level code" policy as hamstringing developers; proponents <em>know</em> that in addition to simplifying the creation of new code by pursuing only making a new test pass, TDD excels when quickly iterating on new functionality, because the existing code coverage you generate makes it easy to change the code you already have with complete confidence. Let's dive in and see how TDD leads from the inception of a feature request to a fully working feature.</p><h2 id="the-feature-request" class="heading-0-0-12"><span class="anchor-0-0-13" data-ignore-text=""><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span>The Feature Request</h2><p>Your company/client comes to you with a new feature request. Right away, you're cautious -- this is clearly entirely new functionality. There won't be any overlap with existing code, or at least none that you can foresee initially. Finance &amp; Sales have teamed up to rework the Stages for existing Opportunities to get assigned their Probabilities using a secretive new forecasting model. In order to test out the effectiveness of the new model, they want to perform a split-test without informing the sales reps that some of their Opportunities are going to be withdrawn. In addition to holding a small percentage of Opportunities in the forecasting control group, they need the "old" Probability scores to be mapped to a new custom field on the Opportunity; there'll be a one-time data mapping necessary to this new field, and then the Probabilities assigned to the Opportunity stages will be updated to reflect the new model.</p><p>This is meant to sound familiar. What follows probably isn't -- but that's the nature of feature requests. Because they're specific to the client/business, I'm instead going to focus on how to solve a problem, rather than going with something siloed to a specific industry. The feature request looks something like this:</p><blockquote><p>With the new Opportunity probabilities, some of them will be updated using a workflow rule to assign the probability to an anti-prime number. When you see an Opportunity get updated with one of these sentinel Probability scores, you'll need to unassign the existing Opportunity owner and reassign to a system user, as well as map the prior Probability to the new custom field.</p></blockquote><h2 id="building-an-anti-prime-generator" class="heading-0-0-12"><span class="anchor-0-0-13" data-ignore-text=""><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span>Building An Anti-Prime Generator</h2><p>First of all -- what's an "anti-prime" number? An anti-prime is defined as a number that can be divided by more numbers than any of the numbers before it (in other words: a number with more factors than any number before it). Since we're operating on a percentage scale for Probability, that means we'll chiefly be concerned with all of the anti-primes from 0 to 100. Let's begin!</p><p>TDD states that lack of code, or lack of code that compiles, counts as a failing test. The first thing we'll need to do is create the object that we'd like to house this business logic in, and define a well-named method that returns true/false:</p><pre class="with-bar"><code class="java code-0-0-14" tabindex="0"><span class="wmbar-0-0-17"><span></span><span></span><span></span><span>classes/AntiPrime.cls</span></span><div class="line-0-0-16 " data-content="public class AntiPrime {"><span class="lineCounter-0-0-15 prim">1</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AntiPrime</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-16 " data-content="  public static Boolean isAntiPrime(Integer num) {"><span class="lineCounter-0-0-15">2</span>  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Boolean</span> <span class="token function">isAntiPrime</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> num<span class="token punctuation">)</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-16 " data-content="    return false;"><span class="lineCounter-0-0-15">3</span>    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="  }"><span class="lineCounter-0-0-15">4</span>  <span class="token punctuation">}</span></div><br><div class="line-0-0-16 " data-content="}"><span class="lineCounter-0-0-15 prim">5</span><span class="token punctuation">}</span></div><br></code></pre><p>That gives us the wings we need to confidently start down the road towards testing this feature:</p><pre class="with-bar"><code class="java code-0-0-14" tabindex="0"><span class="wmbar-0-0-17"><span></span><span></span><span></span><span>classes/AntiPrimeTests.cls</span></span><div class="line-0-0-16 " data-content="@isTest"><span class="lineCounter-0-0-15 prim">1</span><span class="token annotation punctuation">@isTest</span></div><br><div class="line-0-0-16 " data-content="private class AntiPrimeTests {"><span class="lineCounter-0-0-15">2</span><span class="token keyword">private</span> <span class="token keyword">class</span> <span class="token class-name">AntiPrimeTests</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-16 " data-content="  @isTest"><span class="lineCounter-0-0-15">3</span>  <span class="token annotation punctuation">@isTest</span></div><br><div class="line-0-0-16 " data-content="  static void it_should_detect_one_as_an_antiprime() {"><span class="lineCounter-0-0-15">4</span>  <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">it_should_detect_one_as_an_antiprime</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-16 " data-content="    System.assertEquals(true, AntiPrime.isAntiPrime(1));"><span class="lineCounter-0-0-15 prim">5</span>    <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">assertEquals</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token class-name">AntiPrime</span><span class="token punctuation">.</span><span class="token function">isAntiPrime</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="  }"><span class="lineCounter-0-0-15">6</span>  <span class="token punctuation">}</span></div><br><div class="line-0-0-16 " data-content="}"><span class="lineCounter-0-0-15 prim">7</span><span class="token punctuation">}</span></div><br></code></pre><p>Now we have a failing test to work with, and we can begin implementing out this feature. The naive implementation makes no assumptions:</p><pre class="with-bar"><code class="java code-0-0-14" tabindex="0"><span class="wmbar-0-0-17"><span></span><span></span><span></span><span>classes/AntiPrime.cls</span></span><div class="line-0-0-16 " data-content="public class AntiPrime {"><span class="lineCounter-0-0-15 prim">1</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AntiPrime</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-16 " data-content="  public static Boolean isAntiPrime(Integer num) {"><span class="lineCounter-0-0-15">2</span>  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Boolean</span> <span class="token function">isAntiPrime</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> num<span class="token punctuation">)</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-16 " data-content="    return num == 1 ? true : false;"><span class="lineCounter-0-0-15">3</span>    <span class="token keyword">return</span> num <span class="token operator">==</span> <span class="token number">1</span> <span class="token operator">?</span> <span class="token boolean">true</span> <span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="  }"><span class="lineCounter-0-0-15">4</span>  <span class="token punctuation">}</span></div><br><div class="line-0-0-16 " data-content="}"><span class="lineCounter-0-0-15 prim">5</span><span class="token punctuation">}</span></div><br></code></pre><p>Now the first test passed, but we know there are at least several other anti-prime numbers out there below 100. For anti-primes, 1 is the first number because: <code>1/1 = 1</code>. That means, as well, that in order for the next number to compete with 1 as the next anti-prime in the sequence, it has to have <em>two</em> divisors. Time to write another failing test, and then perhaps we'll be able to refactor ...</p><pre class="with-bar"><code class="java code-0-0-14" tabindex="0"><span class="wmbar-0-0-17"><span></span><span></span><span></span><span>classes/AntiPrimeTests.cls</span></span><div class="line-0-0-16 " data-content="@isTest"><span class="lineCounter-0-0-15 prim">1</span><span class="token annotation punctuation">@isTest</span></div><br><div class="line-0-0-16 " data-content="static void it_should_detect_two_as_an_antiprime() {"><span class="lineCounter-0-0-15">2</span><span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">it_should_detect_two_as_an_antiprime</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-16 " data-content="  System.assertEquals(true, AntiPrime.isAntiPrime(2));"><span class="lineCounter-0-0-15">3</span>  <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">assertEquals</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token class-name">AntiPrime</span><span class="token punctuation">.</span><span class="token function">isAntiPrime</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="}"><span class="lineCounter-0-0-15 prim">4</span><span class="token punctuation">}</span></div><br></code></pre><p>Now we are back to the "Red" part of our TDD workflow, and we need to re-assess how we're going to get to green. Clearly, the simplest case is again the best way:</p><pre class="with-bar"><code class="java code-0-0-14" tabindex="0"><span class="wmbar-0-0-17"><span></span><span></span><span></span><span>classes/AntiPrime.cls</span></span><div class="line-0-0-16 " data-content="public class AntiPrime {"><span class="lineCounter-0-0-15 prim">1</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AntiPrime</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-16 " data-content="  public static Boolean isAntiPrime(Integer num) {"><span class="lineCounter-0-0-15">2</span>  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Boolean</span> <span class="token function">isAntiPrime</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> num<span class="token punctuation">)</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-16 " data-content="    if(num == 1 || num == 2) {"><span class="lineCounter-0-0-15">3</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>num <span class="token operator">==</span> <span class="token number">1</span> <span class="token operator">||</span> num <span class="token operator">==</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-16 " data-content="      return true;"><span class="lineCounter-0-0-15">4</span>      <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="    }"><span class="lineCounter-0-0-15 prim">5</span>    <span class="token punctuation">}</span></div><br><div class="line-0-0-16 " data-content="    return false;"><span class="lineCounter-0-0-15">6</span>    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="  }"><span class="lineCounter-0-0-15">7</span>  <span class="token punctuation">}</span></div><br><div class="line-0-0-16 " data-content="}"><span class="lineCounter-0-0-15 prim">8</span><span class="token punctuation">}</span></div><br></code></pre><p>Now both our tests pass, but we're left with the sneaking suspicion that it's time to refactor; the reason for this is because we're now using two "magic" numbers -- 1 and 2 -- to represent the anti-primes, but we actually want to programmatically assign them. Time to go back to the drawing board:</p><pre class="with-bar"><code class="java code-0-0-14" tabindex="0"><span class="wmbar-0-0-17"><span></span><span></span><span></span><span>classes/AntiPrime.cls</span></span><div class="line-0-0-16 " data-content="public class AntiPrime {"><span class="lineCounter-0-0-15 prim">1</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AntiPrime</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-16 " data-content="  public static Integer primesBeforeDefault = 100;"><span class="lineCounter-0-0-15">2</span>  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Integer</span> primesBeforeDefault <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content=""><span class="lineCounter-0-0-15">3</span></div><br><div class="line-0-0-16 " data-content="  public static Boolean isAntiPrime(Integer num) {"><span class="lineCounter-0-0-15">4</span>  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Boolean</span> <span class="token function">isAntiPrime</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> num<span class="token punctuation">)</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-16 " data-content="    return antiPrimesBefore.contains(num);"><span class="lineCounter-0-0-15 prim">5</span>    <span class="token keyword">return</span> antiPrimesBefore<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="  }"><span class="lineCounter-0-0-15">6</span>  <span class="token punctuation">}</span></div><br><div class="line-0-0-16 " data-content=""><span class="lineCounter-0-0-15">7</span></div><br><div class="line-0-0-16 " data-content="/*if you try to use the simpler singleton"><span class="lineCounter-0-0-15">8</span><span class="token comment">/*if you try to use the simpler singleton</span></div><br><div class="line-0-0-16 " data-content="pattern here, e.g. antiPrimesBefore = getAntiPrimes(),"><span class="lineCounter-0-0-15">9</span>pattern here, e.g. antiPrimesBefore = getAntiPrimes(),</div><br><div class="line-0-0-16 " data-content="it's fine for calls to isAntiPrime,"><span class="lineCounter-0-0-15 prim">10</span>it's fine for calls to isAntiPrime,</div><br><div class="line-0-0-16 " data-content="but the set will be double initialized"><span class="lineCounter-0-0-15">11</span>but the set will be double initialized</div><br><div class="line-0-0-16 " data-content="when testing against getAntiPrimes();"><span class="lineCounter-0-0-15">12</span>when testing against getAntiPrimes();</div><br><div class="line-0-0-16 " data-content="you also won't be able to reset"><span class="lineCounter-0-0-15">13</span>you also won't be able to reset</div><br><div class="line-0-0-16 " data-content="primesBeforeDefault*/"><span class="lineCounter-0-0-15">14</span>primesBeforeDefault*/</div><br><div class="line-0-0-16 " data-content="  private static final Set<Integer> antiPrimesBefore {"><span class="lineCounter-0-0-15 prim">15</span>  <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> antiPrimesBefore <span class="token punctuation">{</span></div><br><div class="line-0-0-16 " data-content="    get {"><span class="lineCounter-0-0-15">16</span>    get <span class="token punctuation">{</span></div><br><div class="line-0-0-16 " data-content="      if(antiPrimesBefore == null) {"><span class="lineCounter-0-0-15">17</span>      <span class="token keyword">if</span><span class="token punctuation">(</span>antiPrimesBefore <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-16 " data-content="        antiPrimesBefore = getAntiPrimes();"><span class="lineCounter-0-0-15">18</span>        antiPrimesBefore <span class="token operator">=</span> <span class="token function">getAntiPrimes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="      }"><span class="lineCounter-0-0-15">19</span>      <span class="token punctuation">}</span></div><br><div class="line-0-0-16 " data-content="      return antiPrimesBefore;"><span class="lineCounter-0-0-15 prim">20</span>      <span class="token keyword">return</span> antiPrimesBefore<span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="    }"><span class="lineCounter-0-0-15">21</span>    <span class="token punctuation">}</span></div><br><div class="line-0-0-16 " data-content="    private set;"><span class="lineCounter-0-0-15">22</span>    <span class="token keyword">private</span> set<span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="  }"><span class="lineCounter-0-0-15">23</span>  <span class="token punctuation">}</span></div><br><div class="line-0-0-16 " data-content=""><span class="lineCounter-0-0-15">24</span></div><br><div class="line-0-0-16 " data-content="  private static Set<Integer> getAntiPrimes() {"><span class="lineCounter-0-0-15 prim">25</span>  <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> <span class="token function">getAntiPrimes</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-16 " data-content="    Integer potentialAntiPrime = 1;"><span class="lineCounter-0-0-15">26</span>    <span class="token class-name">Integer</span> potentialAntiPrime <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="    Integer divisorCount = 0;"><span class="lineCounter-0-0-15">27</span>    <span class="token class-name">Integer</span> divisorCount <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="    Set<Integer> antiPrimes = new Set<Integer>();"><span class="lineCounter-0-0-15">28</span>    <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> antiPrimes <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="    while(potentialAntiPrime <= primesBeforeDefault) {"><span class="lineCounter-0-0-15">29</span>    <span class="token keyword">while</span><span class="token punctuation">(</span>potentialAntiPrime <span class="token operator">&lt;=</span> primesBeforeDefault<span class="token punctuation">)</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-16 " data-content="      Integer localDivisorCount = 0;"><span class="lineCounter-0-0-15 prim">30</span>      <span class="token class-name">Integer</span> localDivisorCount <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="      for(Integer potentialDivisor = 1;"><span class="lineCounter-0-0-15">31</span>      <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> potentialDivisor <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="        potentialDivisor <= potentialAntiPrime;"><span class="lineCounter-0-0-15">32</span>        potentialDivisor <span class="token operator">&lt;=</span> potentialAntiPrime<span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="        potentialDivisor++) {"><span class="lineCounter-0-0-15">33</span>        potentialDivisor<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-16 " data-content="        if(Math.mod("><span class="lineCounter-0-0-15">34</span>        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">mod</span><span class="token punctuation">(</span></div><br><div class="line-0-0-16 " data-content="          potentialAntiPrime,"><span class="lineCounter-0-0-15 prim">35</span>          potentialAntiPrime<span class="token punctuation">,</span></div><br><div class="line-0-0-16 " data-content="          potentialDivisor"><span class="lineCounter-0-0-15">36</span>          potentialDivisor</div><br><div class="line-0-0-16 " data-content="        ) == 0) {"><span class="lineCounter-0-0-15">37</span>        <span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-16 " data-content="          localDivisorCount++;"><span class="lineCounter-0-0-15">38</span>          localDivisorCount<span class="token operator">++</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="        }"><span class="lineCounter-0-0-15">39</span>        <span class="token punctuation">}</span></div><br><div class="line-0-0-16 " data-content="      }"><span class="lineCounter-0-0-15 prim">40</span>      <span class="token punctuation">}</span></div><br><div class="line-0-0-16 " data-content="      if(localDivisorCount > divisorCount) {"><span class="lineCounter-0-0-15">41</span>      <span class="token keyword">if</span><span class="token punctuation">(</span>localDivisorCount <span class="token operator">&gt;</span> divisorCount<span class="token punctuation">)</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-16 " data-content="        divisorCount++;"><span class="lineCounter-0-0-15">42</span>        divisorCount<span class="token operator">++</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="        antiPrimes.add(potentialAntiPrime);"><span class="lineCounter-0-0-15">43</span>        antiPrimes<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>potentialAntiPrime<span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="      }"><span class="lineCounter-0-0-15">44</span>      <span class="token punctuation">}</span></div><br><div class="line-0-0-16 " data-content="      potentialAntiPrime++;"><span class="lineCounter-0-0-15 prim">45</span>      potentialAntiPrime<span class="token operator">++</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="    }"><span class="lineCounter-0-0-15">46</span>    <span class="token punctuation">}</span></div><br><div class="line-0-0-16 " data-content="    return antiPrimes;"><span class="lineCounter-0-0-15">47</span>    <span class="token keyword">return</span> antiPrimes<span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="  }"><span class="lineCounter-0-0-15">48</span>  <span class="token punctuation">}</span></div><br><div class="line-0-0-16 " data-content="}"><span class="lineCounter-0-0-15 prim">49</span><span class="token punctuation">}</span></div><br></code></pre><p>Now there's just one "magic" number -- the <code>primesBeforeDefault</code> pseudo-constant. Introducing it has accomplished three things:</p><ul><li>allowed the logic behind generating the anti-primes to flow much better</li><li>introduced a new edge-condition that needs to be tested for; that of calling <code>AntiPrime</code> with a number larger than the anti-primes that were lazily loaded</li><li>created a means to test for numbers above 100 through the use of a static integer</li></ul><pre class="with-bar"><code class="java code-0-0-14" tabindex="0"><span class="wmbar-0-0-17"><span></span><span></span><span></span><span>classes/AntiPrimeTests.cls</span></span><div class="line-0-0-16 " data-content="@isTest"><span class="lineCounter-0-0-15 prim">1</span><span class="token annotation punctuation">@isTest</span></div><br><div class="line-0-0-16 " data-content="static void it_should_throw_exception_if_number_larger_than_anti_primes_generated_is_passed() {"><span class="lineCounter-0-0-15">2</span><span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">it_should_throw_exception_if_number_larger_than_anti_primes_generated_is_passed</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-16 " data-content="  AntiPrime.primesBeforeDefault = 100;"><span class="lineCounter-0-0-15">3</span>  <span class="token class-name">AntiPrime</span><span class="token punctuation">.</span>primesBeforeDefault <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="  Exception e;"><span class="lineCounter-0-0-15">4</span>  <span class="token class-name">Exception</span> e<span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="  try {"><span class="lineCounter-0-0-15 prim">5</span>  <span class="token keyword">try</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-16 " data-content="    AntiPrime.isAntiPrime(200);"><span class="lineCounter-0-0-15">6</span>    <span class="token class-name">AntiPrime</span><span class="token punctuation">.</span><span class="token function">isAntiPrime</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="  } catch(Exception ex) {"><span class="lineCounter-0-0-15">7</span>  <span class="token punctuation">}</span> <span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token class-name">Exception</span> ex<span class="token punctuation">)</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-16 " data-content="    e = ex;"><span class="lineCounter-0-0-15">8</span>    e <span class="token operator">=</span> ex<span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="  }"><span class="lineCounter-0-0-15">9</span>  <span class="token punctuation">}</span></div><br><div class="line-0-0-16 " data-content=""><span class="lineCounter-0-0-15 prim">10</span></div><br><div class="line-0-0-16 " data-content="  System.assertNotEquals(null, e);"><span class="lineCounter-0-0-15">11</span>  <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">assertNotEquals</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="}"><span class="lineCounter-0-0-15">12</span><span class="token punctuation">}</span></div><br><div class="line-0-0-16 " data-content=""><span class="lineCounter-0-0-15">13</span></div><br><div class="line-0-0-16 " data-content="@isTest"><span class="lineCounter-0-0-15">14</span><span class="token annotation punctuation">@isTest</span></div><br><div class="line-0-0-16 " data-content="static void it_should_work_with_numbers_greater_than_100() {"><span class="lineCounter-0-0-15 prim">15</span><span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">it_should_work_with_numbers_greater_than_100</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-16 " data-content="  AntiPrime.primesBeforeDefault = 120;"><span class="lineCounter-0-0-15">16</span>  <span class="token class-name">AntiPrime</span><span class="token punctuation">.</span>primesBeforeDefault <span class="token operator">=</span> <span class="token number">120</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="  System.assertEquals(true, AntiPrime.isAntiPrime(120));"><span class="lineCounter-0-0-15">17</span>  <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">assertEquals</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token class-name">AntiPrime</span><span class="token punctuation">.</span><span class="token function">isAntiPrime</span><span class="token punctuation">(</span><span class="token number">120</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="}"><span class="lineCounter-0-0-15 prim">18</span><span class="token punctuation">}</span></div><br></code></pre><p>And in <code>AntiPrime</code>:</p><pre class="with-bar"><code class="java code-0-0-14" tabindex="0"><span class="wmbar-0-0-17"><span></span><span></span><span></span><span>classes/AntiPrime.cls</span></span><div class="line-0-0-16 " data-content="public static Boolean isAntiPrime(Integer num) {"><span class="lineCounter-0-0-15 prim">1</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Boolean</span> <span class="token function">isAntiPrime</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> num<span class="token punctuation">)</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-16 " data-content="  if(num > primesBeforeDefault) {"><span class="lineCounter-0-0-15">2</span>  <span class="token keyword">if</span><span class="token punctuation">(</span>num <span class="token operator">&gt;</span> primesBeforeDefault<span class="token punctuation">)</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-16 " data-content="    throw new AntiPrimeException('Primes weren\'t generated to: ' + num);"><span class="lineCounter-0-0-15">3</span>    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">AntiPrimeException</span><span class="token punctuation">(</span><span class="token string">'Primes weren\'t generated to: '</span> <span class="token operator">+</span> num<span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="  }"><span class="lineCounter-0-0-15">4</span>  <span class="token punctuation">}</span></div><br><div class="line-0-0-16 " data-content="  return antiPrimesBefore.contains(num);"><span class="lineCounter-0-0-15 prim">5</span>  <span class="token keyword">return</span> antiPrimesBefore<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="}"><span class="lineCounter-0-0-15">6</span><span class="token punctuation">}</span></div><br><div class="line-0-0-16 " data-content=""><span class="lineCounter-0-0-15">7</span></div><br><div class="line-0-0-16 " data-content="//...."><span class="lineCounter-0-0-15">8</span><span class="token comment">//....</span></div><br><div class="line-0-0-16 " data-content="public class AntiPrimeException extends Exception {}"><span class="lineCounter-0-0-15 prim">9</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AntiPrimeException</span> <span class="token keyword">extends</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></div><br></code></pre><p>Now it's time to continue with the tests to ensure that all of our expected anti-primes are being generated correctly. Let's raise the visibility of the <code>getAntiPrimes</code> private static method to see what's currently being output:</p><pre class="with-bar"><code class="java code-0-0-14" tabindex="0"><span class="wmbar-0-0-17"><span></span><span></span><span></span><span>classes/AntiPrime.cls</span></span><div class="line-0-0-16 " data-content="@testVisible"><span class="lineCounter-0-0-15 prim">1</span><span class="token annotation punctuation">@testVisible</span></div><br><div class="line-0-0-16 " data-content="private static Set<Integer> getAntiPrimes() {"><span class="lineCounter-0-0-15">2</span><span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> <span class="token function">getAntiPrimes</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-16 " data-content="//.."><span class="lineCounter-0-0-15">3</span><span class="token comment">//..</span></div><br><div class="line-0-0-16 " data-content="}"><span class="lineCounter-0-0-15">4</span><span class="token punctuation">}</span></div><br><div class="line-0-0-16 " data-content=""><span class="lineCounter-0-0-15 prim">5</span></div><br><div class="line-0-0-16 " data-content="//and in AntiPrimeTests.cls ..."><span class="lineCounter-0-0-15">6</span><span class="token comment">//and in AntiPrimeTests.cls ...</span></div><br><div class="line-0-0-16 " data-content="@isTest"><span class="lineCounter-0-0-15">7</span><span class="token annotation punctuation">@isTest</span></div><br><div class="line-0-0-16 " data-content="static void it_should_properly_generate_anti_primes_below_sentinel_value() {"><span class="lineCounter-0-0-15">8</span><span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">it_should_properly_generate_anti_primes_below_sentinel_value</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-16 " data-content="  //make no assumptions!"><span class="lineCounter-0-0-15">9</span>  <span class="token comment">//make no assumptions!</span></div><br><div class="line-0-0-16 " data-content="  AntiPrime.primesBeforeDefault = 100;"><span class="lineCounter-0-0-15 prim">10</span>  <span class="token class-name">AntiPrime</span><span class="token punctuation">.</span>primesBeforeDefault <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="  System.assertEquals("><span class="lineCounter-0-0-15">11</span>  <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">assertEquals</span><span class="token punctuation">(</span></div><br><div class="line-0-0-16 " data-content="    new Set<Integer>{ 1, 2, 4, 6, 12, 24, 36, 48, 60 },"><span class="lineCounter-0-0-15">12</span>    <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">24</span><span class="token punctuation">,</span> <span class="token number">36</span><span class="token punctuation">,</span> <span class="token number">48</span><span class="token punctuation">,</span> <span class="token number">60</span> <span class="token punctuation">}</span><span class="token punctuation">,</span></div><br><div class="line-0-0-16 " data-content="    AntiPrime.getAntiPrimes()"><span class="lineCounter-0-0-15">13</span>    <span class="token class-name">AntiPrime</span><span class="token punctuation">.</span><span class="token function">getAntiPrimes</span><span class="token punctuation">(</span><span class="token punctuation">)</span></div><br><div class="line-0-0-16 " data-content="  );"><span class="lineCounter-0-0-15">14</span>  <span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="}"><span class="lineCounter-0-0-15 prim">15</span><span class="token punctuation">}</span></div><br></code></pre><p>Aaaaand the test fails. Examining the output, it seems I've introduced an unintended bug during my refactor. Did you spot it? You see, 72 and 60 both have 12 divisors ... but I messed up when incrementing the <code>divisorCount</code> variable. It shouldn't just be <em>incremented</em> when the <code>localDivisorCount</code> variable is greater than the last divisor count -- it should be <em>set equal to the localDivisorCount</em>. Otherwise, both 60 and 72 end up qualifying because the prior divisor count is 10 when 60 is reached:</p><pre class="with-bar"><code class="java code-0-0-14" tabindex="0"><span class="wmbar-0-0-17"><span></span><span></span><span></span><span>classes/AntiPrime.cls</span></span><div class="line-0-0-16 " data-content="@testVisible"><span class="lineCounter-0-0-15 prim">1</span><span class="token annotation punctuation">@testVisible</span></div><br><div class="line-0-0-16 " data-content="private static Set<Integer> getAntiPrimes() {"><span class="lineCounter-0-0-15">2</span><span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> <span class="token function">getAntiPrimes</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-16 " data-content="//..."><span class="lineCounter-0-0-15">3</span><span class="token comment">//...</span></div><br><div class="line-0-0-16 " data-content="  if(localDivisorCount > divisorCount) {"><span class="lineCounter-0-0-15">4</span>  <span class="token keyword">if</span><span class="token punctuation">(</span>localDivisorCount <span class="token operator">&gt;</span> divisorCount<span class="token punctuation">)</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-16 " data-content="    divisorCount = localDivisorCount;"><span class="lineCounter-0-0-15 prim">5</span>    divisorCount <span class="token operator">=</span> localDivisorCount<span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="    antiPrimes.add(potentialAntiPrime);"><span class="lineCounter-0-0-15">6</span>    antiPrimes<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>potentialAntiPrime<span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="  }"><span class="lineCounter-0-0-15">7</span>  <span class="token punctuation">}</span></div><br><div class="line-0-0-16 " data-content="  potentialAntiPrime++;"><span class="lineCounter-0-0-15">8</span>  potentialAntiPrime<span class="token operator">++</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="//..."><span class="lineCounter-0-0-15">9</span><span class="token comment">//...</span></div><br><div class="line-0-0-16 " data-content="}"><span class="lineCounter-0-0-15 prim">10</span><span class="token punctuation">}</span></div><br></code></pre><p>Now the tests all pass. At this point, because you deterministically know the values for the anti-primes below 100, you could definitely make the argument that the first two tests -- testing for specific values -- should be deleted.</p><p>You could also make the case that the second one should instead be modified to test for the <em>last</em> value below 100 (in other words, that 60 is correctly detected). I would go down the latter path, knowing that the test for <code>getAntiPrimes</code> was covering the other cases.</p><h3 id="an-aside-on-anti-prime-number-generation" class="heading-0-0-12"><span class="anchor-0-0-13" data-ignore-text=""><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span>An Aside On Anti-Prime Number Generation</h3><p>It's true that <a href="https://rosettacode.org/wiki/Anti-primes">solving the anti-prime formula</a> is easier in some other languages with more expressive/fluent array features. However, examining the presented solutions, I would advise you to keep readability <em>and</em> performance in mind. Most of the submitted answers treat <code>1</code> (and, occasionally, <code>2</code> as well) as a special case, whereas I was more concerned with showing how to treat all numbers equally -- although you can certainly make the argument that <code>0</code> is not treated particularly equally in any of the solutions, mine included.</p><p>Code style is a contentious topic, and I don't mean to present my implementation as the preferred solution. In reality, there is no way to avoid two iterations in a Java-like language when building the solution; however, your taste and preferences in regards to <code>for</code> or <code>while</code> loops could entirely (and understandably) differ from mine. I use <code>while</code> loops infrequently, though if you've read my <a href="/joys-of-apex/writing-performant-apex-tests/">Writing Performant Apex Tests</a> post, you'll know that they frequently out-perform the plain-jane <code>for</code> loops.</p><p>That said, the only improvement I think improves the legibility of the above solution would be if Apex supported range-based array initializations, which would make the inner iteration in <code>getPrimes</code> more expressive by simplifying the <code>for</code> loop. Writing code -- even code that needs to be extremely performant -- always requires achieving a suitable balancing act between readability and performance.</p><p>As a counterpoint, take a look at the F# example in the provided link ... sure, it <em>works</em>, but what if it didn't?!</p><h2 id="completing-the-feature-request" class="heading-0-0-12"><span class="anchor-0-0-13" data-ignore-text=""><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span>Completing The Feature Request</h2><p>The rest of the feature request falls much more in line with our pre-existing code (and is omitted, as a result). We can see that we're going to need to need to call <code>AntiPrime</code> from within our Opportunity Handler's before update method, assign the old probability to the hidden custom field, and re-assign the owner to our placeholder owner if the new probability is anti-prime.</p><p>A finished pull request for this feature will end up including:</p><ul><li>the new custom field metadata</li><li>permission set (and/or) profile related changes for this field</li><li>AntiPrime and its tests</li><li>the updates to the OpportunityHandler and the tests for OpportunityHandler</li><li>the workflow rule, if such things are version-controlled (hopefully they are) in your/your client's org</li></ul><h2 id="test-driven-development-is-your-friend" class="heading-0-0-12"><span class="anchor-0-0-13" data-ignore-text=""><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span>Test Driven Development Is Your Friend</h2><p>Hopefully you can see how the "red, green, refactor" mindset can help you to quickly iterate on new and existing features. Having the safety net of your tests helps provide feedback on your system's design as it grows over time. Writing tests also helps you to focus on the single smallest step you can take as you develop to "get to green." Though it's true that in some big refactors, you end up having to rework tests, in general I find that even with large-scale (30+ files) refactors, I rarely have to update tests in a well-designed code base. Rather, the existing tests themselves help me to verify that everything has been successfully re-implemented correctly.</p><p>This is also because TDD fits in well with the Object-Oriented Programming paradigm, the "Open Closed Principle," which states:</p><blockquote><p>Objects should be open for extension but closed for modification</p></blockquote><p>When your building blocks are small and expressive, they can contribute effectively to the larger domain problems without being modified. Similarly, when your tests are small, you're motivated and incentivized to keep your methods small, your public interfaces minimal, and your designs clean. For true "helper" methods like an anti-prime generator, static methods help to keep your code footprint small by minimizing the number of objects you need to initialize and keep track of.</p><p>For something like an <code>OpportunityOwnerReassigner</code> object, which could encapsulate the decision to reassign an owner based on the opportunity's probability being anti-prime, it's crucial to keep in mind that while this specific feature calls for reassignment by means of the opportunity's Probability field, future requests might expand on the number of fields / the specific owner to consider when making a reassignment. This might even <em>be</em> the future request, which is a perfect example of extending an existing object's responsibilities in light of new requirements.</p><hr><p>Once again, I'd like to thank you for following along with the <a href="/joys-of-apex/">Joys Of Apex</a>. The anti-prime problem is a fun little formula to solve for, and there are many different ways the solution could be implemented. I initially started thinking about it following a trivia question on the subject; hopefully it stands in well as an abstract example of what some obscure business logic might end up looking like to an outsider. As well, I hope it proved fun to see how TDD can help you to iterate on a problem in a well-defined way. Till next time!</p><div class="contentnav-0-0-7" data-no-search=""><a href="#the-feature-request" class="h2" data-content-highlight="the-feature-request">The Feature Request</a><a href="#building-an-anti-prime-generator" class="h2" data-content-highlight="building-an-anti-prime-generator">Building An Anti-Prime Generator</a><a href="#an-aside-on-anti-prime-number-generation" class="h3" data-content-highlight="an-aside-on-anti-prime-number-generation">An Aside On Anti-Prime Number Generation</a><a href="#completing-the-feature-request" class="h2" data-content-highlight="completing-the-feature-request">Completing The Feature Request</a><a href="#test-driven-development-is-your-friend" class="h2" data-content-highlight="test-driven-development-is-your-friend">Test Driven Development Is Your Friend</a></div></div><div id="-codedoc-toc" class="toc-0-0-4"><div class="content-0-0-5"><p><a href="/joys-of-apex/">Home</a>
<a href="/joys-of-apex/apex-logging-service">Apex Logging Service</a>
<a href="/joys-of-apex/apex-object-oriented-basics">Apex Object-Oriented Basics</a>
<a href="/joys-of-apex/batchable-and-queueable-apex">Batchable And Queueable Apex</a>
<a href="/joys-of-apex/building-a-better-singleton">Building A Better Singleton</a>
<a href="/joys-of-apex/continuous-integration-with-sfdx">Continuous Integration With SFDX</a>
<a href="/joys-of-apex/dependency-injection-factory-pattern">Dependency Injection &amp; Factory Pattern</a>
<a href="/joys-of-apex/enum-apex-class-gotchas">Enum Apex Class Gotchas</a>
<a href="/joys-of-apex/extendable-apis">Extendable Apis</a>
<a href="/joys-of-apex/future-method-callout-callback">Future Methods, Callouts &amp; Callbacks</a>
<a href="/joys-of-apex/idiomatic-salesforce-apex">Idiomatic Salesforce Apex</a>
<a href="/joys-of-apex/intro">Introduction &amp; Testing Philosophy</a>
<a href="/joys-of-apex/lazy-iterators">Lazy Iterators</a>
<a href="/joys-of-apex/lightweight-trigger-handler">Lightweight Trigger Handler</a>
<a href="/joys-of-apex/lwc-composable-modal">LWC Composable Modal</a>
<a href="/joys-of-apex/lwc-composable-pagination">LWC Composable Pagination</a>
<a href="/joys-of-apex/lwc-custom-path">LWC Custom Lead Path</a>
<a href="/joys-of-apex/mocking-dml">Mocking DML</a>
<a href="/joys-of-apex/react-versus-lightning-web-components">React Versus Lightning Web Components</a>
<a href="/joys-of-apex/repository-pattern">Repository Pattern</a>
<a href="/joys-of-apex/sorting-and-performance-in-apex">Sorting And Performance In Apex</a>
<a href="/joys-of-apex/test-driven-development-example">Test Driven Development Example</a>
<a href="/joys-of-apex/writing-performant-apex-tests">Writing Performant Apex Tests</a></p><p><br><br></p><p><a href="https://www.jamessimone.net/">Read more tech articles</a></p></div></div><div class="footer-0-0-3"><div class="left"><script id="afsyjaGsvG">(function(){function load(){if (window.__sdh_transport){window.__sdh_transport("afsyjaGsvG", "BWW0vHR4333HbDOiwZ67JA==", {});} }; if (document.readyState == 'complete') load(); else window.addEventListener('load', load); })()</script></div><div class="main"><div class="inside"></div></div><div class="right"><script id="EzTUZftzlX">(function(){function load(){if (window.__sdh_transport){window.__sdh_transport("EzTUZftzlX", "6yEdMfRRlNsUBKSBOTazFg==", {});} }; if (document.readyState == 'complete') load(); else window.addEventListener('load', load); })()</script></div></div><script id="su_ZfqZPca">(function(){function load(){if (window.__sdh_transport){window.__sdh_transport("su_ZfqZPca", "wh9V9isakhdwzlz9ZUjvyw==", {"namespace":"/joys-of-apex"});} }; if (document.readyState == 'complete') load(); else window.addEventListener('load', load); })()</script></body></html>