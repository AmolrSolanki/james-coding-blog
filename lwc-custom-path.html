<!DOCTYPE html><html><head><title>Joys Of Apex | Lightning Web Components Custom Lead Path</title><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"><meta name="robots" content="index,follow"><meta name="theme-color" content="#212121"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><link rel="shortcut icon" href="/joys-of-apex/favicon.ico"><link href="https://fonts.googleapis.com/css?family=Hind:400,700&amp;display=swap" rel="stylesheet"><link href="https://fonts.googleapis.com/css?family=Source+Code+Pro:300,400&amp;display=swap" rel="stylesheet"><link href="https://fonts.googleapis.com/icon?family=Material+Icons|Material+Icons+Outlined" rel="stylesheet"><style>
      body, input, button {
        font-family: 'Hind', sans-serif;
      }

      code, .hljs {
        font-family: 'Source Code Pro', 'Courier New', Courier, monospace;
      }

      .icon-font {
        font-family: 'Material Icons';
        font-weight: normal;
        font-style: normal;
        font-size: 24px;  /* Preferred icon size */
        display: inline-block;
        line-height: 1;
        text-transform: none;
        letter-spacing: normal;
        word-wrap: normal;
        white-space: nowrap;
        direction: ltr;
      
        /* Support for all WebKit browsers. */
        -webkit-font-smoothing: antialiased;
        /* Support for Safari and Chrome. */
        text-rendering: optimizeLegibility;
      
        /* Support for Firefox. */
        -moz-osx-font-smoothing: grayscale;
      
        /* Support for IE. */
        font-feature-settings: 'liga';
      }

      .icon-font.outline {
        font-family: 'Material Icons Outlined';
      }
    </style><link href="/joys-of-apex/styles/codedoc-styles.css" rel="stylesheet"><script async="" defer="" src="/joys-of-apex/bundle/codedoc-bundle.js"></script><meta property="og:image" content="./img/joys-of-apex-thumbnail.png"><script>window.githubConfig={"repo":"james-coding-blog","user":"jamessimone"}</script><style>.container{padding-top: 0 !important}</style><style>#-codedoc-toc { backdrop-filter: blur(16px); -webkit-backdrop-filter: blur(16px) }</style><meta name="twitter:title" content="Joys Of Apex | Lightning Web Components Custom Lead Path"><meta property="og:type" content="article"><meta property="og:title" content="Joys Of Apex | Lightning Web Components Custom Lead Path"></head><body><header style="margin-left: 1rem">Read more at <a href="https://wwww.jamessimone.net">jamessimone.net</a>, or return to the <a href="/joys-of-apex/">homepage</a></header><div id="-codedoc-container" class="container"><script>window.source = {"base":"posts","path":"lwc-custom-path.md","namespace":"/joys-of-apex","title":{"base":"Joys Of Apex","connector":" | "}}</script><div class="hero-0-0-8" style="margin-bottom: -156px"><img src="/joys-of-apex/img/the-joys-of-apex.png" class="image-0-0-9" data-hero=""><span class="caption-0-0-10"></span></div><marker><br>
<br>
<br>
<br>
<br>

</marker><h1 class="h-0-0-11 "><span style="color: green; 
      text-shadow: none; 
      font-size: 48px"><p>Lightning Web Components Custom Lead Path</p></span></h1><script id="bUWucJTzES">(function(){function load(){if (window.__sdh_transport){window.__sdh_transport("bUWucJTzES", "kRzsgnV+B7EQTskbovy+YA==", {"src":"github"});} }; if (document.readyState == 'complete') load(); else window.addEventListener('load', load); })()</script><div hidden="" data-ignore-text="" data-meta-override-property="og:image"><p>./img/joys-of-apex-thumbnail.png</p></div><p>The Path component that comes standard with Salesforce is a wonderful visualization tool for Sales when working on Leads / Opportunities, and it can be utilized to great effect with Cases in Service Cloud, too. The vanilla Path component has seen some customization options since its initial release, and you can wire up dropdown menus attached to it to deal with associated fields. That's a lot more customization than you typically get, out of the box -- but what happens when you want more? What happens if you want to group related picklist fields together? What happens if you want to validate required fields without adding additional metadata (in the way of validation rules)? What happens if you want to hide some of the picklist statuses per record type?</p><p>In 2017, I had a problem. I was working on a Salesforce migration into Sales Cloud and stakeholders wanted to hide the vanilla "Convert Lead" popup that is surfaced through advancing the Lead path. There were a number of reasons behind the request (all reasonable), but we weren't particularly familiar with Aura -- which was fairly new at the time -- and our experiences with VisualForce had left us scarred. The stakeholders for Sales were pumped about the Lead path component; the team was dismayed that we might need to hide it to prevent improper lead conversions (which were being routed purely through Apex).</p><p>I wanted a fresh challenge and decided to build out a custom Lead path component over the weekend using Aura. I want to heavily preface this statement by saying that this was entirely of my own volition, and while I will always advocate for taking breaks, and the importance particularly of keeping the weekend purely to spend as you please, in this specific instance I was looking to learn something, and I knew my team wouldn't get to the request prior to launching otherwise. At the time, I knew only the basics of HTML, and I was just beginning to learn JavaScript on an old Angular (shudder) codebase. Throwing an entirely new framework into the mix meant for slow going that weekend, and even with the incredible headstart given by the use of the Aura Path component by <a href="https://github.com/appiphony/Strike-Components">Appiphony</a>, I barely finished after two 14+ hour days.</p><p>The Aura component -- markup, JS controller, JS helper, Apex controller, and tests ended up contributing a little over 600 lines of code to our codebase. In looking at the advancements with the Lightning Data Service since I worked on that component, and now having a <a href="/joys-of-apex/lwc-composable-modal">composable modal</a> to work with (a crucial pre-req), I wanted to see just how slim a Lightning Web Component version of the custom Path component would be.</p><hr><h2 id="path-overview" class="heading-0-0-12"><span class="anchor-0-0-13" data-ignore-text=""><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span>Path Overview</h2><p>In the end, using LDS to load SObject data, as well as better asynchronous methods in LWC in general, helps to trim the LWC version of the Path to ~400 lines of code. Yes, it does rely on the modal component that we built previously, but the modal is also a reusable (and far more powerful/responsive) component than the one that shipped with the Aura component I built. This Path component:</p><ul><li>relies on both <code>Lead.Status</code> picklist values as well as the current Lead's Status. We'll get into why that's an interesting problem from an engineering standpoint in a bit</li><li>follows the accessibility recommendations for Path implementers as documented in the Lightning Design System</li><li>groups "Closed" Lead Statuses together; this shows how <a href="/joys-of-apex/lwc-composable-modal">the modal</a> gets incorporated into more complicated components, as well as how you can use composable components to simplify the design and maintenance of your Salesforce frontend</li><li>shows how to validate and display errors for required fields prior to submitting a form/group of input components</li></ul><p>When using the Lightning Data Service (hereafter referred to as LDS, though this acronym can confusingly also apply to the Lightning Design System), <code>@wire</code> attributes are used to provisionally fetch data without a dedicated Apex controller backend. However, an interesting bullet point on this approach is that most of the examples using LDS to fetch data from the backend rely on at most <em>two</em> sources; this is the case for the <code>getPicklistValues</code> function that we will be exhibiting shortly. <code>getPicklist</code> values shows how a function/property can pass required data by using the <code>$</code> sign at the beginning of a string to represent a <em>reactive local property</em>; in instances where parameters to LDS are supplied with the dollar sign at the start of their string, the function waits until <em>that</em> data is loaded prior to getting its own data.</p><p>But what happens when you have a component that relies upon two independent streams of wired data? Such is the case when considering rebuilding the Lead Path component -- you need the available picklist statuses per record type (for our example, we'll just be using the default record type, but you can easily expand the component that ends up being shown to accomodate specific record types), <em>and</em> in order to show the Path at the current status, you need the current Lead status.</p><p>Savvy Path users will note that the vanilla Path component in Salesforce visibly loads and <em>then</em> shows the current status. There's also a video I'll show later of this same issue. That brief flicker is something that we'll try to avoid in our custom component -- and in order to do so, we'll have to dive in to the <code>@wire</code> attribute.</p><h2 id="lightning-data-service-overview" class="heading-0-0-12"><span class="anchor-0-0-13" data-ignore-text=""><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span>Lightning Data Service Overview</h2><p>Lightning Data Service, or LDS, differs from fetching data from within your Salesforce instance via an <code>@AuraEnabled</code> Apex controller in a few ways (as enumerated in the documentation):</p><blockquote><p>Record data is loaded progressively (non-blocking). Results are cached client-side automatically. The cache is automatically invalidated when the underlying data changes. Back-and-forths with the server are minimized by sharing the request cache amongst components; components using the same underlying data use only a single request.</p></blockquote><p>The <em>shape</em> of data that's used to update your underlying object representations also differs between LDS and your Apex controller. Consider the Lead object sent to the LDS <code>updateRecord</code> method:</p><pre class=""><code class="json code-0-0-14" tabindex="0"><span class="wmbar-0-0-17"><span></span><span></span><span></span><span></span></span><div class="line-0-0-16 " data-content="{"><span class="lineCounter-0-0-15 prim">1</span><span class="token punctuation">{</span></div><br><div class="line-0-0-16 " data-content="  //for `updateRecord`"><span class="lineCounter-0-0-15">2</span>  <span class="token comment">//for `updateRecord`</span></div><br><div class="line-0-0-16 " data-content="  // &quot;apiName&quot; top-level field can be omitted"><span class="lineCounter-0-0-15">3</span>  <span class="token comment">// </span><span class="token string">"apiName"</span> top-level field can be omitted</div><br><div class="line-0-0-16 " data-content="  &quot;fields&quot;: {"><span class="lineCounter-0-0-15">4</span>  <span class="token property">"fields"</span><span class="token operator">:</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-16 " data-content="    &quot;Status&quot;: &quot;Closed - Converted&quot;,"><span class="lineCounter-0-0-15 prim">5</span>    <span class="token property">"Status"</span><span class="token operator">:</span> <span class="token string">"Closed - Converted"</span><span class="token punctuation">,</span></div><br><div class="line-0-0-16 " data-content="    &quot;CustomDate__c&quot;: null,"><span class="lineCounter-0-0-15">6</span>    <span class="token property">"CustomDate__c"</span><span class="token operator">:</span> <span class="token null keyword">null</span><span class="token punctuation">,</span></div><br><div class="line-0-0-16 " data-content="    &quot;Id&quot;: &quot;someLeadId&quot;"><span class="lineCounter-0-0-15">7</span>    <span class="token property">"Id"</span><span class="token operator">:</span> <span class="token string">"someLeadId"</span></div><br><div class="line-0-0-16 " data-content="  }"><span class="lineCounter-0-0-15">8</span>  <span class="token punctuation">}</span></div><br><div class="line-0-0-16 " data-content="}"><span class="lineCounter-0-0-15 prim">9</span><span class="token punctuation">}</span></div><br></code></pre><p>This is a <code>RecordInput</code> type that can be fed directly to the LDS methods. Alternatively, you can use the <code>generateRecordInputForCreate</code> or <code>generateRecordInputForUpdate</code> helper methods to accomplish the same thing. Either way, your method call to perform the insert/update ends up being pretty simple:</p><pre class=""><code class="javascript code-0-0-14" tabindex="0"><span class="wmbar-0-0-17"><span></span><span></span><span></span><span></span></span><div class="line-0-0-16 " data-content="const recordToUpdate = {"><span class="lineCounter-0-0-15 prim">1</span><span class="token keyword">const</span> recordToUpdate <span class="token operator">=</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-16 " data-content="  fields: {"><span class="lineCounter-0-0-15">2</span>  fields<span class="token operator">:</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-16 " data-content="    Id: this.recordId,"><span class="lineCounter-0-0-15">3</span>    Id<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>recordId<span class="token punctuation">,</span></div><br><div class="line-0-0-16 " data-content="    //other fields"><span class="lineCounter-0-0-15">4</span>    <span class="token comment">//other fields</span></div><br><div class="line-0-0-16 " data-content="  },"><span class="lineCounter-0-0-15 prim">5</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span></div><br><div class="line-0-0-16 " data-content="};"><span class="lineCounter-0-0-15">6</span><span class="token punctuation">}</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="await updateRecord(recordToUpdate);"><span class="lineCounter-0-0-15 prim">7</span><span class="token keyword">await</span> <span class="token function">updateRecord</span><span class="token punctuation">(</span>recordToUpdate<span class="token punctuation">)</span><span class="token punctuation">;</span></div><br></code></pre><p>This involves an additional level of nesting from the JSON as compared to a Lead that's being sent to an Apex controller:</p><pre class=""><code class="json code-0-0-14" tabindex="0"><span class="wmbar-0-0-17"><span></span><span></span><span></span><span></span></span><div class="line-0-0-16 " data-content="//this gets deserialized by your Apex controller as a lead"><span class="lineCounter-0-0-15 prim">1</span><span class="token comment">//this gets deserialized by your Apex controller as a lead</span></div><br><div class="line-0-0-16 " data-content="{"><span class="lineCounter-0-0-15">2</span><span class="token punctuation">{</span></div><br><div class="line-0-0-16 " data-content="  &quot;Status&quot;: &quot;Closed - Converted&quot;,"><span class="lineCounter-0-0-15">3</span>  <span class="token property">"Status"</span><span class="token operator">:</span> <span class="token string">"Closed - Converted"</span><span class="token punctuation">,</span></div><br><div class="line-0-0-16 " data-content="  &quot;CustomDate__c&quot;: null,"><span class="lineCounter-0-0-15">4</span>  <span class="token property">"CustomDate__c"</span><span class="token operator">:</span> <span class="token null keyword">null</span><span class="token punctuation">,</span></div><br><div class="line-0-0-16 " data-content="  &quot;Id&quot;: &quot;someLeadId&quot;"><span class="lineCounter-0-0-15 prim">5</span>  <span class="token property">"Id"</span><span class="token operator">:</span> <span class="token string">"someLeadId"</span></div><br><div class="line-0-0-16 " data-content="}"><span class="lineCounter-0-0-15 prim">6</span><span class="token punctuation">}</span></div><br></code></pre><p>On the other hand, you have to use a named parameter when sending data to an Apex controller, so it's not as simple as supplying your key/value JSON object to the method:</p><pre class=""><code class="javascript code-0-0-14" tabindex="0"><span class="wmbar-0-0-17"><span></span><span></span><span></span><span></span></span><div class="line-0-0-16 " data-content="import { LightningElement, wire } from &quot;lwc&quot;;"><span class="lineCounter-0-0-15 prim">1</span><span class="token keyword">import</span> <span class="token punctuation">{</span> LightningElement<span class="token punctuation">,</span> wire <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"lwc"</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="import exampleApexMethod from &quot;@salesforce/apex/SomeApexController.exampleApexMethod&quot;;"><span class="lineCounter-0-0-15">2</span><span class="token keyword">import</span> exampleApexMethod <span class="token keyword">from</span> <span class="token string">"@salesforce/apex/SomeApexController.exampleApexMethod"</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content=""><span class="lineCounter-0-0-15">3</span></div><br><div class="line-0-0-16 " data-content="export default class ExampleComponent extends LightningElement {"><span class="lineCounter-0-0-15">4</span><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">ExampleComponent</span> <span class="token keyword">extends</span> <span class="token class-name">LightningElement</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-16 " data-content="  lead = {"><span class="lineCounter-0-0-15 prim">5</span>  lead <span class="token operator">=</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-16 " data-content="    Id: this.recordId,"><span class="lineCounter-0-0-15">6</span>    Id<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>recordId<span class="token punctuation">,</span></div><br><div class="line-0-0-16 " data-content="    //other values"><span class="lineCounter-0-0-15">7</span>    <span class="token comment">//other values</span></div><br><div class="line-0-0-16 " data-content="  };"><span class="lineCounter-0-0-15">8</span>  <span class="token punctuation">}</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content=""><span class="lineCounter-0-0-15">9</span></div><br><div class="line-0-0-16 " data-content="  //the &quot;example&quot; named parameter below"><span class="lineCounter-0-0-15 prim">10</span>  <span class="token comment">//the "example" named parameter below</span></div><br><div class="line-0-0-16 " data-content="  //MUST match the name of the parameter on the Apex side"><span class="lineCounter-0-0-15">11</span>  <span class="token comment">//MUST match the name of the parameter on the Apex side</span></div><br><div class="line-0-0-16 " data-content="  @wire(exampleApexMethod, { example: &quot;$lead&quot; }) apexResponse;"><span class="lineCounter-0-0-15">12</span>  @<span class="token function">wire</span><span class="token punctuation">(</span>exampleApexMethod<span class="token punctuation">,</span> <span class="token punctuation">{</span> example<span class="token operator">:</span> <span class="token string">"$lead"</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> apexResponse<span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="}"><span class="lineCounter-0-0-15 prim">13</span><span class="token punctuation">}</span></div><br></code></pre><p>In general, because LDS is available for Aura as well as LWC, it's always a good time to be migrating your components away from using Apex unless the data you're trying to retrieve isn't supported, or an update you're looking to perform would be complicated to perform using the LDS adapters. For one thing, it's surprising to me that the company that invented the word "bulkification" doesn't have bulk-ready LDS adapters; this isn't really applicable in today's example, but for enabling in-line edit in LWC's making use of <code>lightning-datatable</code>, having to iterate through and update the edited rows one-by-one isn't ideal.</p><p>There are still legitimate use-cases for Apex controllers with LWC -- lots of them, in fact. If your data needs are simple, however, you should definitely be using LDS.</p><h3 id="loading-multiple-wire-methods-with-dependent-data-using-lds" class="heading-0-0-12"><span class="anchor-0-0-13" data-ignore-text=""><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span>Loading Multiple @Wire Methods With Dependent Data Using LDS</h3><p>There are some obvious examples in the Salesforce documentation that show you how to load data dependent on another <code>@wire</code> method; for our purposes, again, we'll be using <code>getPicklistValues</code>, which typically depends on the <code>getObjectInfo</code> wire (although, embarrassingly, all of the shown examples in the <code>lwc-recipes</code> repo that make use of the <code>getPicklistValues</code> LDS method <em>hard-code the record type</em>).</p><p>The basic method signature for using <code>getPicklistValues</code> looks something like this in a LWC:</p><pre class=""><code class="javascript code-0-0-14" tabindex="0"><span class="wmbar-0-0-17"><span></span><span></span><span></span><span></span></span><div class="line-0-0-16 " data-content="import { getPicklistValues } from 'lightning/uiObjectInfoApi';"><span class="lineCounter-0-0-15 prim">1</span><span class="token keyword">import</span> <span class="token punctuation">{</span> getPicklistValues <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'lightning/uiObjectInfoApi'</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="import STATUS_FIELD from '@salesforce/schema/Lead.Status';"><span class="lineCounter-0-0-15">2</span><span class="token keyword">import</span> <span class="token constant">STATUS_FIELD</span> <span class="token keyword">from</span> <span class="token string">'@salesforce/schema/Lead.Status'</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content=""><span class="lineCounter-0-0-15">3</span></div><br><div class="line-0-0-16 " data-content="export default class CustomPath extends LightningElement {"><span class="lineCounter-0-0-15">4</span><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">CustomPath</span> <span class="token keyword">extends</span> <span class="token class-name">LightningElement</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-16 " data-content="  @wire(getPicklistValues, {"><span class="lineCounter-0-0-15 prim">5</span>  @<span class="token function">wire</span><span class="token punctuation">(</span>getPicklistValues<span class="token punctuation">,</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-16 " data-content="    recordTypeId: '$your wired up record type Id here',"><span class="lineCounter-0-0-15">6</span>    recordTypeId<span class="token operator">:</span> <span class="token string">'$your wired up record type Id here'</span><span class="token punctuation">,</span></div><br><div class="line-0-0-16 " data-content="    fieldApiName: STATUS_FIELD"><span class="lineCounter-0-0-15">7</span>    fieldApiName<span class="token operator">:</span> <span class="token constant">STATUS_FIELD</span></div><br><div class="line-0-0-16 " data-content="  }) //property or function here"><span class="lineCounter-0-0-15">8</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">//property or function here</span></div><br><div class="line-0-0-16 " data-content="}"><span class="lineCounter-0-0-15 prim">9</span><span class="token punctuation">}</span></div><br></code></pre><p>So right away, we have this <code>$</code> character denoting that we're referring to a reactive property, but there's one crucial line in the docs necessary to bridge between the pre-requisite for using this function without hard-coding, and getting the data you need:</p><blockquote><p>You can use one <code>@wire</code> output as another <code>@wire</code> input. For example, you could use <code>$record.data.fieldName</code> as an input to another wire adapter.</p></blockquote><p>Aha -- so we can actually reference the underlying returned data from one <code>@wire</code> method when calling another <code>@wire</code> method:</p><pre class=""><code class="javascript code-0-0-14" tabindex="0"><span class="wmbar-0-0-17"><span></span><span></span><span></span><span></span></span><div class="line-0-0-16 " data-content="import { getObjectInfo } from &quot;lightning/uiObjectInfoApi&quot;;"><span class="lineCounter-0-0-15 prim">1</span><span class="token keyword">import</span> <span class="token punctuation">{</span> getObjectInfo <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"lightning/uiObjectInfoApi"</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="import { getPicklistValues } from &quot;lightning/uiObjectInfoApi&quot;;"><span class="lineCounter-0-0-15">2</span><span class="token keyword">import</span> <span class="token punctuation">{</span> getPicklistValues <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"lightning/uiObjectInfoApi"</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content=""><span class="lineCounter-0-0-15">3</span></div><br><div class="line-0-0-16 " data-content="import LEAD_OBJECT from &quot;@salesforce/schema/Lead&quot;;"><span class="lineCounter-0-0-15">4</span><span class="token keyword">import</span> <span class="token constant">LEAD_OBJECT</span> <span class="token keyword">from</span> <span class="token string">"@salesforce/schema/Lead"</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="import STATUS_FIELD from &quot;@salesforce/schema/Lead.Status&quot;;"><span class="lineCounter-0-0-15 prim">5</span><span class="token keyword">import</span> <span class="token constant">STATUS_FIELD</span> <span class="token keyword">from</span> <span class="token string">"@salesforce/schema/Lead.Status"</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content=""><span class="lineCounter-0-0-15">6</span></div><br><div class="line-0-0-16 " data-content="export default class CustomPath extends LightningElement {"><span class="lineCounter-0-0-15">7</span><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">CustomPath</span> <span class="token keyword">extends</span> <span class="token class-name">LightningElement</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-16 " data-content="  @wire(getObjectInfo, { objectApiName: LEAD_OBJECT })"><span class="lineCounter-0-0-15">8</span>  @<span class="token function">wire</span><span class="token punctuation">(</span>getObjectInfo<span class="token punctuation">,</span> <span class="token punctuation">{</span> objectApiName<span class="token operator">:</span> <span class="token constant">LEAD_OBJECT</span> <span class="token punctuation">}</span><span class="token punctuation">)</span></div><br><div class="line-0-0-16 " data-content="  objectInfo;"><span class="lineCounter-0-0-15">9</span>  objectInfo<span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content=""><span class="lineCounter-0-0-15 prim">10</span></div><br><div class="line-0-0-16 " data-content="  //here, we use the results of the `objectInfo` call"><span class="lineCounter-0-0-15">11</span>  <span class="token comment">//here, we use the results of the `objectInfo` call</span></div><br><div class="line-0-0-16 " data-content="  @wire(getPicklistValues, {"><span class="lineCounter-0-0-15">12</span>  @<span class="token function">wire</span><span class="token punctuation">(</span>getPicklistValues<span class="token punctuation">,</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-16 " data-content="    recordTypeId: &quot;$objectInfo.data.defaultRecordTypeId&quot;,"><span class="lineCounter-0-0-15">13</span>    recordTypeId<span class="token operator">:</span> <span class="token string">"$objectInfo.data.defaultRecordTypeId"</span><span class="token punctuation">,</span></div><br><div class="line-0-0-16 " data-content="    fieldApiName: STATUS_FIELD,"><span class="lineCounter-0-0-15">14</span>    fieldApiName<span class="token operator">:</span> <span class="token constant">STATUS_FIELD</span><span class="token punctuation">,</span></div><br><div class="line-0-0-16 " data-content="  })"><span class="lineCounter-0-0-15 prim">15</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span></div><br><div class="line-0-0-16 " data-content="  leadStatuses({ data, error }) {"><span class="lineCounter-0-0-15">16</span>  <span class="token function">leadStatuses</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> data<span class="token punctuation">,</span> error <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-16 " data-content="    const leadStatusCb = (data) => {"><span class="lineCounter-0-0-15">17</span>    <span class="token keyword">const</span> <span class="token function-variable function">leadStatusCb</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-16 " data-content="      //logic for handling the data"><span class="lineCounter-0-0-15">18</span>      <span class="token comment">//logic for handling the data</span></div><br><div class="line-0-0-16 " data-content="    };"><span class="lineCounter-0-0-15">19</span>    <span class="token punctuation">}</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="    this._handleWireCallback({ data, error, cb: leadStatusCb });"><span class="lineCounter-0-0-15 prim">20</span>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_handleWireCallback</span><span class="token punctuation">(</span><span class="token punctuation">{</span> data<span class="token punctuation">,</span> error<span class="token punctuation">,</span> cb<span class="token operator">:</span> leadStatusCb <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="  }"><span class="lineCounter-0-0-15">21</span>  <span class="token punctuation">}</span></div><br><div class="line-0-0-16 " data-content=""><span class="lineCounter-0-0-15">22</span></div><br><div class="line-0-0-16 " data-content="  _handleWireCallback = ({ data, error, cb }) => {"><span class="lineCounter-0-0-15">23</span>  <span class="token function-variable function">_handleWireCallback</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> data<span class="token punctuation">,</span> error<span class="token punctuation">,</span> cb <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-16 " data-content="    //in reality you'd want to gracefully handle/display"><span class="lineCounter-0-0-15">24</span>    <span class="token comment">//in reality you'd want to gracefully handle/display</span></div><br><div class="line-0-0-16 " data-content="    //the error, but we're prototyping here!"><span class="lineCounter-0-0-15 prim">25</span>    <span class="token comment">//the error, but we're prototyping here!</span></div><br><div class="line-0-0-16 " data-content="    //either way, I like to have a method like this to consolidate"><span class="lineCounter-0-0-15">26</span>    <span class="token comment">//either way, I like to have a method like this to consolidate</span></div><br><div class="line-0-0-16 " data-content="    //error handling when using multiple @wire methods"><span class="lineCounter-0-0-15">27</span>    <span class="token comment">//error handling when using multiple @wire methods</span></div><br><div class="line-0-0-16 " data-content="    if (error) console.error(error);"><span class="lineCounter-0-0-15">28</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="    else if (data) {"><span class="lineCounter-0-0-15">29</span>    <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-16 " data-content="      cb(data);"><span class="lineCounter-0-0-15 prim">30</span>      <span class="token function">cb</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="    }"><span class="lineCounter-0-0-15">31</span>    <span class="token punctuation">}</span></div><br><div class="line-0-0-16 " data-content="  };"><span class="lineCounter-0-0-15">32</span>  <span class="token punctuation">}</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="}"><span class="lineCounter-0-0-15 prim">33</span><span class="token punctuation">}</span></div><br></code></pre><p>That takes care of one hurdle -- fetching the appropriate Lead Statuses by the default Record Type. But what about the problem I was outlining earlier? When we receive the Lead Statuses, we'll actually need to denote a lot of information about each status:</p><ul><li>where it is on the path</li><li>is the status active (based on the Lead's current status)</li><li>is the status currently selected? (this can differ from active because people can select a different status prior to saving)</li></ul><h3 id="the-dirty-way-to-call-lwc-wire-methods-with-dependent-data" class="heading-0-0-12"><span class="anchor-0-0-13" data-ignore-text=""><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span>The Dirty Way To Call LWC @Wire Methods With Dependent Data</h3><p>There <em>is</em> one way that you can ensure that data is returned (in this case, the current Lead info when making the <code>getPicklistValues</code> call): by adding an extra reactive property to your LDS call that references a variable set by another <code>@wire</code> call:</p><pre class=""><code class="javascript code-0-0-14" tabindex="0"><span class="wmbar-0-0-17"><span></span><span></span><span></span><span></span></span><div class="line-0-0-16 " data-content="@wire(getPicklistValues, {"><span class="lineCounter-0-0-15 prim">1</span>@<span class="token function">wire</span><span class="token punctuation">(</span>getPicklistValues<span class="token punctuation">,</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-16 " data-content="  recordTypeId: '$objectInfo.data.defaultRecordTypeId',"><span class="lineCounter-0-0-15">2</span>  recordTypeId<span class="token operator">:</span> <span class="token string">'$objectInfo.data.defaultRecordTypeId'</span><span class="token punctuation">,</span></div><br><div class="line-0-0-16 " data-content="  fieldApiName: STATUS_FIELD,"><span class="lineCounter-0-0-15">3</span>  fieldApiName<span class="token operator">:</span> <span class="token constant">STATUS_FIELD</span><span class="token punctuation">,</span></div><br><div class="line-0-0-16 " data-content="  //this one dirty hack you would never expect ..."><span class="lineCounter-0-0-15">4</span>  <span class="token comment">//this one dirty hack you would never expect ...</span></div><br><div class="line-0-0-16 " data-content="  //in all seriousness, I'm not certain what the &quot;supported&quot;"><span class="lineCounter-0-0-15 prim">5</span>  <span class="token comment">//in all seriousness, I'm not certain what the "supported"</span></div><br><div class="line-0-0-16 " data-content="  //state is for passing extraneous values to @wire methods"><span class="lineCounter-0-0-15">6</span>  <span class="token comment">//state is for passing extraneous values to @wire methods</span></div><br><div class="line-0-0-16 " data-content="  status: '$_status'"><span class="lineCounter-0-0-15">7</span>  status<span class="token operator">:</span> <span class="token string">'$_status'</span></div><br><div class="line-0-0-16 " data-content="  //^^ here _status would be set by another @wire method"><span class="lineCounter-0-0-15">8</span>  <span class="token comment">//^^ here _status would be set by another @wire method</span></div><br><div class="line-0-0-16 " data-content="})"><span class="lineCounter-0-0-15 prim">9</span><span class="token punctuation">}</span><span class="token punctuation">)</span></div><br></code></pre><p>I started experimenting with this method before concluding that despite the niceties of the code about statuses living in one place, it was totally marred by the seemingly friable nature of this approach. While including additional paramaters in <code>@wire</code> methods doesn't throw an error at present, there's no guarantee that the way that the API handles such extra paramaters won't change in the future. Better to do things by the books.</p><h3 id="the-proper-way-to-deal-with-dependent-wire-data" class="heading-0-0-12"><span class="anchor-0-0-13" data-ignore-text=""><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span>The Proper Way To Deal With Dependent @Wire Data</h3><p>The <em>proper</em> way to handle such dueling requirements is through the use of the <code>renderedCallback</code> lifecycle method. <code>renderedCallback</code> runs every time that a Lightning Web Component is re-rendered; because of this, logic that pertains only to the first "full" load of the component (when all data has been loaded) is typically gated behind a one-time conditional. On the <code>&lt;template&gt;</code> markup side of the equation, you'll also be using part of the same conditional to only display the full contents of the component once the data has been loaded:</p><pre class=""><code class="html code-0-0-14" tabindex="0"><span class="wmbar-0-0-17"><span></span><span></span><span></span><span></span></span><div class="line-0-0-16 " data-content="<template>"><span class="lineCounter-0-0-15 prim">1</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span></div><br><div class="line-0-0-16 " data-content="  <c-modal"><span class="lineCounter-0-0-15">2</span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>c-modal</span></span></div><br><div class="line-0-0-16 " data-content="    modal-header=&quot;Close Status Required&quot;"><span class="lineCounter-0-0-15">3</span>    <span class="token attr-name">modal-header</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Close Status Required<span class="token punctuation">"</span></span></div><br><div class="line-0-0-16 " data-content="    modal-tagline=&quot;Set the specific close status to proceed!&quot;"><span class="lineCounter-0-0-15">4</span>    <span class="token attr-name">modal-tagline</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Set the specific close status to proceed!<span class="token punctuation">"</span></span></div><br><div class="line-0-0-16 " data-content="    modal-save-handler=&quot;{modalSaveHandler}&quot;"><span class="lineCounter-0-0-15 prim">5</span>    <span class="token attr-name">modal-save-handler</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>{modalSaveHandler}<span class="token punctuation">"</span></span></div><br><div class="line-0-0-16 " data-content="  >"><span class="lineCounter-0-0-15">6</span>  <span class="token punctuation">&gt;</span></div><br><div class="line-0-0-16 " data-content="    <template if:true=&quot;{hasData}&quot;>"><span class="lineCounter-0-0-15">7</span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name"><span class="token namespace">if:</span>true</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>{hasData}<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span></div><br><div class="line-0-0-16 " data-content="      <!-- body of the component here -->"><span class="lineCounter-0-0-15">8</span>      <span class="token comment">&lt;!-- body of the component here --&gt;</span></div><br><div class="line-0-0-16 " data-content="    </template>"><span class="lineCounter-0-0-15">9</span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span></div><br><div class="line-0-0-16 " data-content="  </c-modal>"><span class="lineCounter-0-0-15 prim">10</span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>c-modal</span><span class="token punctuation">&gt;</span></span></div><br><div class="line-0-0-16 " data-content="</template>"><span class="lineCounter-0-0-15 prim">11</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span></div><br></code></pre><p>And in the JavaScript controller:</p><pre class=""><code class="javascript code-0-0-14" tabindex="0"><span class="wmbar-0-0-17"><span></span><span></span><span></span><span></span></span><div class="line-0-0-16 " data-content="import { api, LightningElement, track, wire } from &quot;lwc&quot;;"><span class="lineCounter-0-0-15 prim">1</span><span class="token keyword">import</span> <span class="token punctuation">{</span> api<span class="token punctuation">,</span> LightningElement<span class="token punctuation">,</span> track<span class="token punctuation">,</span> wire <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"lwc"</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="import { getObjectInfo } from &quot;lightning/uiObjectInfoApi&quot;;"><span class="lineCounter-0-0-15">2</span><span class="token keyword">import</span> <span class="token punctuation">{</span> getObjectInfo <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"lightning/uiObjectInfoApi"</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="import { getPicklistValues } from &quot;lightning/uiObjectInfoApi&quot;;"><span class="lineCounter-0-0-15">3</span><span class="token keyword">import</span> <span class="token punctuation">{</span> getPicklistValues <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"lightning/uiObjectInfoApi"</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="import { getRecord, updateRecord } from &quot;lightning/uiRecordApi&quot;;"><span class="lineCounter-0-0-15">4</span><span class="token keyword">import</span> <span class="token punctuation">{</span> getRecord<span class="token punctuation">,</span> updateRecord <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"lightning/uiRecordApi"</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="import { ShowToastEvent } from &quot;lightning/platformShowToastEvent&quot;;"><span class="lineCounter-0-0-15 prim">5</span><span class="token keyword">import</span> <span class="token punctuation">{</span> ShowToastEvent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"lightning/platformShowToastEvent"</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content=""><span class="lineCounter-0-0-15">6</span></div><br><div class="line-0-0-16 " data-content="import LEAD_OBJECT from &quot;@salesforce/schema/Lead&quot;;"><span class="lineCounter-0-0-15">7</span><span class="token keyword">import</span> <span class="token constant">LEAD_OBJECT</span> <span class="token keyword">from</span> <span class="token string">"@salesforce/schema/Lead"</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="import CUSTOM_DATE_FIELD from &quot;@salesforce/schema/Lead.CustomDate__c&quot;;"><span class="lineCounter-0-0-15">8</span><span class="token keyword">import</span> <span class="token constant">CUSTOM_DATE_FIELD</span> <span class="token keyword">from</span> <span class="token string">"@salesforce/schema/Lead.CustomDate__c"</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="import STATUS_FIELD from &quot;@salesforce/schema/Lead.Status&quot;;"><span class="lineCounter-0-0-15">9</span><span class="token keyword">import</span> <span class="token constant">STATUS_FIELD</span> <span class="token keyword">from</span> <span class="token string">"@salesforce/schema/Lead.Status"</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content=""><span class="lineCounter-0-0-15 prim">10</span></div><br><div class="line-0-0-16 " data-content="const COMPLETED = &quot;Mark Status as Complete&quot;;"><span class="lineCounter-0-0-15">11</span><span class="token keyword">const</span> <span class="token constant">COMPLETED</span> <span class="token operator">=</span> <span class="token string">"Mark Status as Complete"</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="const CLOSED = &quot;Closed&quot;;"><span class="lineCounter-0-0-15">12</span><span class="token keyword">const</span> <span class="token constant">CLOSED</span> <span class="token operator">=</span> <span class="token string">"Closed"</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="const CLOSED_CTA = &quot;Select Closed Status&quot;;"><span class="lineCounter-0-0-15">13</span><span class="token keyword">const</span> <span class="token constant">CLOSED_CTA</span> <span class="token operator">=</span> <span class="token string">"Select Closed Status"</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="//more on this in a bit"><span class="lineCounter-0-0-15">14</span><span class="token comment">//more on this in a bit</span></div><br><div class="line-0-0-16 " data-content="const SPECIAL_STATUS = &quot;Closed - Special Date&quot;;"><span class="lineCounter-0-0-15 prim">15</span><span class="token keyword">const</span> <span class="token constant">SPECIAL_STATUS</span> <span class="token operator">=</span> <span class="token string">"Closed - Special Date"</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content=""><span class="lineCounter-0-0-15">16</span></div><br><div class="line-0-0-16 " data-content="export default class CustomPath extends LightningElement {"><span class="lineCounter-0-0-15">17</span><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">CustomPath</span> <span class="token keyword">extends</span> <span class="token class-name">LightningElement</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-16 " data-content="  //I like to keep all @wire/lifecycle"><span class="lineCounter-0-0-15">18</span>  <span class="token comment">//I like to keep all @wire/lifecycle</span></div><br><div class="line-0-0-16 " data-content="  //methods at the top of my components"><span class="lineCounter-0-0-15">19</span>  <span class="token comment">//methods at the top of my components</span></div><br><div class="line-0-0-16 " data-content="  @api recordId;"><span class="lineCounter-0-0-15 prim">20</span>  @api recordId<span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="  @wire(getObjectInfo, { objectApiName: LEAD_OBJECT })"><span class="lineCounter-0-0-15">21</span>  @<span class="token function">wire</span><span class="token punctuation">(</span>getObjectInfo<span class="token punctuation">,</span> <span class="token punctuation">{</span> objectApiName<span class="token operator">:</span> <span class="token constant">LEAD_OBJECT</span> <span class="token punctuation">}</span><span class="token punctuation">)</span></div><br><div class="line-0-0-16 " data-content="  objectInfo;"><span class="lineCounter-0-0-15">22</span>  objectInfo<span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content=""><span class="lineCounter-0-0-15">23</span></div><br><div class="line-0-0-16 " data-content="  @wire(getRecord, {"><span class="lineCounter-0-0-15">24</span>  @<span class="token function">wire</span><span class="token punctuation">(</span>getRecord<span class="token punctuation">,</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-16 " data-content="    recordId: &quot;$recordId&quot;,"><span class="lineCounter-0-0-15 prim">25</span>    recordId<span class="token operator">:</span> <span class="token string">"$recordId"</span><span class="token punctuation">,</span></div><br><div class="line-0-0-16 " data-content="    fields: [CUSTOM_DATE_FIELD, STATUS_FIELD],"><span class="lineCounter-0-0-15">26</span>    fields<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token constant">CUSTOM_DATE_FIELD</span><span class="token punctuation">,</span> <span class="token constant">STATUS_FIELD</span><span class="token punctuation">]</span><span class="token punctuation">,</span></div><br><div class="line-0-0-16 " data-content="  })"><span class="lineCounter-0-0-15">27</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span></div><br><div class="line-0-0-16 " data-content="  lead({ data, error }) {"><span class="lineCounter-0-0-15">28</span>  <span class="token function">lead</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> data<span class="token punctuation">,</span> error <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-16 " data-content="    const leadCb = (data) => {"><span class="lineCounter-0-0-15">29</span>    <span class="token keyword">const</span> <span class="token function-variable function">leadCb</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-16 " data-content="      this.status = this._getLeadValueOrDefault("><span class="lineCounter-0-0-15 prim">30</span>      <span class="token keyword">this</span><span class="token punctuation">.</span>status <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_getLeadValueOrDefault</span><span class="token punctuation">(</span></div><br><div class="line-0-0-16 " data-content="        data,"><span class="lineCounter-0-0-15">31</span>        data<span class="token punctuation">,</span></div><br><div class="line-0-0-16 " data-content="        STATUS_FIELD.fieldApiName"><span class="lineCounter-0-0-15">32</span>        <span class="token constant">STATUS_FIELD</span><span class="token punctuation">.</span>fieldApiName</div><br><div class="line-0-0-16 " data-content="      );"><span class="lineCounter-0-0-15">33</span>      <span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="      this.storedStatus = this.status;"><span class="lineCounter-0-0-15">34</span>      <span class="token keyword">this</span><span class="token punctuation">.</span>storedStatus <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>status<span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="      this.dateValue = this._getLeadValueOrDefault("><span class="lineCounter-0-0-15 prim">35</span>      <span class="token keyword">this</span><span class="token punctuation">.</span>dateValue <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_getLeadValueOrDefault</span><span class="token punctuation">(</span></div><br><div class="line-0-0-16 " data-content="        data,"><span class="lineCounter-0-0-15">36</span>        data<span class="token punctuation">,</span></div><br><div class="line-0-0-16 " data-content="        CUSTOM_DATE_FIELD.fieldApiName"><span class="lineCounter-0-0-15">37</span>        <span class="token constant">CUSTOM_DATE_FIELD</span><span class="token punctuation">.</span>fieldApiName</div><br><div class="line-0-0-16 " data-content="      );"><span class="lineCounter-0-0-15">38</span>      <span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="      if (this.status &amp;&amp; this.status.includes(CLOSED)) {"><span class="lineCounter-0-0-15">39</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>status <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>status<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token constant">CLOSED</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-16 " data-content="        this.advanceButtonText = CLOSED_CTA;"><span class="lineCounter-0-0-15 prim">40</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>advanceButtonText <span class="token operator">=</span> <span class="token constant">CLOSED_CTA</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="        this.currentClosedStatus = this.status;"><span class="lineCounter-0-0-15">41</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>currentClosedStatus <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>status<span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="        this.customCloseDateSelected ="><span class="lineCounter-0-0-15">42</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>customCloseDateSelected <span class="token operator">=</span></div><br><div class="line-0-0-16 " data-content="          this.currentClosedStatus === SPECIAL_STATUS;"><span class="lineCounter-0-0-15">43</span>          <span class="token keyword">this</span><span class="token punctuation">.</span>currentClosedStatus <span class="token operator">===</span> <span class="token constant">SPECIAL_STATUS</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="      }"><span class="lineCounter-0-0-15">44</span>      <span class="token punctuation">}</span></div><br><div class="line-0-0-16 " data-content="    };"><span class="lineCounter-0-0-15 prim">45</span>    <span class="token punctuation">}</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content=""><span class="lineCounter-0-0-15">46</span></div><br><div class="line-0-0-16 " data-content="    this._handleWireCallback({ data, error, cb: leadCb });"><span class="lineCounter-0-0-15">47</span>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_handleWireCallback</span><span class="token punctuation">(</span><span class="token punctuation">{</span> data<span class="token punctuation">,</span> error<span class="token punctuation">,</span> cb<span class="token operator">:</span> leadCb <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="  }"><span class="lineCounter-0-0-15">48</span>  <span class="token punctuation">}</span></div><br><div class="line-0-0-16 " data-content=""><span class="lineCounter-0-0-15">49</span></div><br><div class="line-0-0-16 " data-content="  @wire(getPicklistValues, {"><span class="lineCounter-0-0-15 prim">50</span>  @<span class="token function">wire</span><span class="token punctuation">(</span>getPicklistValues<span class="token punctuation">,</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-16 " data-content="    recordTypeId: &quot;$objectInfo.data.defaultRecordTypeId&quot;,"><span class="lineCounter-0-0-15">51</span>    recordTypeId<span class="token operator">:</span> <span class="token string">"$objectInfo.data.defaultRecordTypeId"</span><span class="token punctuation">,</span></div><br><div class="line-0-0-16 " data-content="    fieldApiName: STATUS_FIELD,"><span class="lineCounter-0-0-15">52</span>    fieldApiName<span class="token operator">:</span> <span class="token constant">STATUS_FIELD</span><span class="token punctuation">,</span></div><br><div class="line-0-0-16 " data-content="  })"><span class="lineCounter-0-0-15">53</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span></div><br><div class="line-0-0-16 " data-content="  leadStatuses({ data, error }) {"><span class="lineCounter-0-0-15">54</span>  <span class="token function">leadStatuses</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> data<span class="token punctuation">,</span> error <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-16 " data-content="    const leadStatusCb = (data) => {"><span class="lineCounter-0-0-15 prim">55</span>    <span class="token keyword">const</span> <span class="token function-variable function">leadStatusCb</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-16 " data-content="      const statusList = [];"><span class="lineCounter-0-0-15">56</span>      <span class="token keyword">const</span> statusList <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="      data.values.forEach((picklistStatus) => {"><span class="lineCounter-0-0-15">57</span>      data<span class="token punctuation">.</span>values<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">picklistStatus</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-16 " data-content="        if (!picklistStatus.label.includes(CLOSED)) {"><span class="lineCounter-0-0-15">58</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>picklistStatus<span class="token punctuation">.</span>label<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token constant">CLOSED</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-16 " data-content="          statusList.push(picklistStatus.label);"><span class="lineCounter-0-0-15">59</span>          statusList<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>picklistStatus<span class="token punctuation">.</span>label<span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="        }"><span class="lineCounter-0-0-15 prim">60</span>        <span class="token punctuation">}</span></div><br><div class="line-0-0-16 " data-content="      });"><span class="lineCounter-0-0-15">61</span>      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="      //the order matters here and isn't obvious"><span class="lineCounter-0-0-15">62</span>      <span class="token comment">//the order matters here and isn't obvious</span></div><br><div class="line-0-0-16 " data-content="      //but we want &quot;Closed&quot; to be the LAST status"><span class="lineCounter-0-0-15">63</span>      <span class="token comment">//but we want "Closed" to be the LAST status</span></div><br><div class="line-0-0-16 " data-content="      statusList.push(&quot;Closed&quot;);"><span class="lineCounter-0-0-15">64</span>      statusList<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">"Closed"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="      this._statuses = statusList;"><span class="lineCounter-0-0-15 prim">65</span>      <span class="token keyword">this</span><span class="token punctuation">.</span>_statuses <span class="token operator">=</span> statusList<span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content=""><span class="lineCounter-0-0-15">66</span></div><br><div class="line-0-0-16 " data-content="      //now build the visible/closed statuses"><span class="lineCounter-0-0-15">67</span>      <span class="token comment">//now build the visible/closed statuses</span></div><br><div class="line-0-0-16 " data-content="      data.values.forEach((status) => {"><span class="lineCounter-0-0-15">68</span>      data<span class="token punctuation">.</span>values<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">status</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-16 " data-content="        if (status.label.includes(CLOSED)) {"><span class="lineCounter-0-0-15">69</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>status<span class="token punctuation">.</span>label<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token constant">CLOSED</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-16 " data-content="          //we're using a combobox in markup"><span class="lineCounter-0-0-15 prim">70</span>          <span class="token comment">//we're using a combobox in markup</span></div><br><div class="line-0-0-16 " data-content="          //which requires both label/value"><span class="lineCounter-0-0-15">71</span>          <span class="token comment">//which requires both label/value</span></div><br><div class="line-0-0-16 " data-content="          this.closedStatuses.push({"><span class="lineCounter-0-0-15">72</span>          <span class="token keyword">this</span><span class="token punctuation">.</span>closedStatuses<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span></div><br><div class="line-0-0-16 " data-content="            label: status.label,"><span class="lineCounter-0-0-15">73</span>            label<span class="token operator">:</span> status<span class="token punctuation">.</span>label<span class="token punctuation">,</span></div><br><div class="line-0-0-16 " data-content="            value: status.label,"><span class="lineCounter-0-0-15">74</span>            value<span class="token operator">:</span> status<span class="token punctuation">.</span>label<span class="token punctuation">,</span></div><br><div class="line-0-0-16 " data-content="          });"><span class="lineCounter-0-0-15 prim">75</span>          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="          if (!this.currentClosedStatus) {"><span class="lineCounter-0-0-15">76</span>          <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>currentClosedStatus<span class="token punctuation">)</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-16 " data-content="            //promote the first closed value to the component"><span class="lineCounter-0-0-15">77</span>            <span class="token comment">//promote the first closed value to the component</span></div><br><div class="line-0-0-16 " data-content="            //so that the combobox can show a sensible default"><span class="lineCounter-0-0-15">78</span>            <span class="token comment">//so that the combobox can show a sensible default</span></div><br><div class="line-0-0-16 " data-content="            this.currentClosedStatus = status.label;"><span class="lineCounter-0-0-15">79</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>currentClosedStatus <span class="token operator">=</span> status<span class="token punctuation">.</span>label<span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="          }"><span class="lineCounter-0-0-15 prim">80</span>          <span class="token punctuation">}</span></div><br><div class="line-0-0-16 " data-content="        } else {"><span class="lineCounter-0-0-15">81</span>        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-16 " data-content="          this.visibleStatuses.push(this._getPathItemFromStatus(status.label));"><span class="lineCounter-0-0-15">82</span>          <span class="token keyword">this</span><span class="token punctuation">.</span>visibleStatuses<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_getPathItemFromStatus</span><span class="token punctuation">(</span>status<span class="token punctuation">.</span>label<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="        }"><span class="lineCounter-0-0-15">83</span>        <span class="token punctuation">}</span></div><br><div class="line-0-0-16 " data-content="      });"><span class="lineCounter-0-0-15">84</span>      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="      this.visibleStatuses.push(this._getPathItemFromStatus(CLOSED));"><span class="lineCounter-0-0-15 prim">85</span>      <span class="token keyword">this</span><span class="token punctuation">.</span>visibleStatuses<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_getPathItemFromStatus</span><span class="token punctuation">(</span><span class="token constant">CLOSED</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="    };"><span class="lineCounter-0-0-15">86</span>    <span class="token punctuation">}</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="    this._handleWireCallback({ data, error, cb: leadStatusCb });"><span class="lineCounter-0-0-15">87</span>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_handleWireCallback</span><span class="token punctuation">(</span><span class="token punctuation">{</span> data<span class="token punctuation">,</span> error<span class="token punctuation">,</span> cb<span class="token operator">:</span> leadStatusCb <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="  }"><span class="lineCounter-0-0-15">88</span>  <span class="token punctuation">}</span></div><br><div class="line-0-0-16 " data-content=""><span class="lineCounter-0-0-15">89</span></div><br><div class="line-0-0-16 " data-content="  renderedCallback() {"><span class="lineCounter-0-0-15 prim">90</span>  <span class="token function">renderedCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-16 " data-content="    if (!this._hasRendered &amp;&amp; this.hasData) {"><span class="lineCounter-0-0-15">91</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>_hasRendered <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>hasData<span class="token punctuation">)</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-16 " data-content="      //prevents the advance button from jumping to the side"><span class="lineCounter-0-0-15">92</span>      <span class="token comment">//prevents the advance button from jumping to the side</span></div><br><div class="line-0-0-16 " data-content="      //as the rest of the component loads"><span class="lineCounter-0-0-15">93</span>      <span class="token comment">//as the rest of the component loads</span></div><br><div class="line-0-0-16 " data-content="      this.showAdvanceButton = true;"><span class="lineCounter-0-0-15">94</span>      <span class="token keyword">this</span><span class="token punctuation">.</span>showAdvanceButton <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="      this._hasRendered = true;"><span class="lineCounter-0-0-15 prim">95</span>      <span class="token keyword">this</span><span class="token punctuation">.</span>_hasRendered <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="    }"><span class="lineCounter-0-0-15">96</span>    <span class="token punctuation">}</span></div><br><div class="line-0-0-16 " data-content="    if (this.hasData) {"><span class="lineCounter-0-0-15">97</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>hasData<span class="token punctuation">)</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-16 " data-content="      //everytime the component re-renders"><span class="lineCounter-0-0-15">98</span>      <span class="token comment">//everytime the component re-renders</span></div><br><div class="line-0-0-16 " data-content="      //we need to ensure the correct CSS classes"><span class="lineCounter-0-0-15">99</span>      <span class="token comment">//we need to ensure the correct CSS classes</span></div><br><div class="line-0-0-16 " data-content="      //and accessibility attributes are applied"><span class="lineCounter-0-0-15 prim">100</span>      <span class="token comment">//and accessibility attributes are applied</span></div><br><div class="line-0-0-16 " data-content="      const current = this.visibleStatuses.find((status) =>"><span class="lineCounter-0-0-15">101</span>      <span class="token keyword">const</span> current <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>visibleStatuses<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">status</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span></div><br><div class="line-0-0-16 " data-content="        this.storedStatus.includes(status.label)"><span class="lineCounter-0-0-15">102</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>storedStatus<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>status<span class="token punctuation">.</span>label<span class="token punctuation">)</span></div><br><div class="line-0-0-16 " data-content="      ) || { label: &quot;Unknown&quot; };"><span class="lineCounter-0-0-15">103</span>      <span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token punctuation">{</span> label<span class="token operator">:</span> <span class="token string">"Unknown"</span> <span class="token punctuation">}</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="      current.ariaSelected = true;"><span class="lineCounter-0-0-15">104</span>      current<span class="token punctuation">.</span>ariaSelected <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="      current.class = &quot;slds-path__item slds-is-current slds-is-active&quot;;"><span class="lineCounter-0-0-15 prim">105</span>      current<span class="token punctuation">.</span>class <span class="token operator">=</span> <span class="token string">"slds-path__item slds-is-current slds-is-active"</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content=""><span class="lineCounter-0-0-15">106</span></div><br><div class="line-0-0-16 " data-content="      const currentIndex = this.visibleStatuses.indexOf(current);"><span class="lineCounter-0-0-15">107</span>      <span class="token keyword">const</span> currentIndex <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>visibleStatuses<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>current<span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="      this.visibleStatuses.forEach((status, index) => {"><span class="lineCounter-0-0-15">108</span>      <span class="token keyword">this</span><span class="token punctuation">.</span>visibleStatuses<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">status<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-16 " data-content="        if (index < currentIndex) {"><span class="lineCounter-0-0-15">109</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">&lt;</span> currentIndex<span class="token punctuation">)</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-16 " data-content="          status.class = status.class.replace("><span class="lineCounter-0-0-15 prim">110</span>          status<span class="token punctuation">.</span>class <span class="token operator">=</span> status<span class="token punctuation">.</span>class<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span></div><br><div class="line-0-0-16 " data-content="            &quot;slds-is-incomplete&quot;,"><span class="lineCounter-0-0-15">111</span>            <span class="token string">"slds-is-incomplete"</span><span class="token punctuation">,</span></div><br><div class="line-0-0-16 " data-content="            &quot;slds-is-complete&quot;"><span class="lineCounter-0-0-15">112</span>            <span class="token string">"slds-is-complete"</span></div><br><div class="line-0-0-16 " data-content="          );"><span class="lineCounter-0-0-15">113</span>          <span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="        }"><span class="lineCounter-0-0-15">114</span>        <span class="token punctuation">}</span></div><br><div class="line-0-0-16 " data-content="      });"><span class="lineCounter-0-0-15 prim">115</span>      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="    }"><span class="lineCounter-0-0-15">116</span>    <span class="token punctuation">}</span></div><br><div class="line-0-0-16 " data-content="  }"><span class="lineCounter-0-0-15">117</span>  <span class="token punctuation">}</span></div><br><div class="line-0-0-16 " data-content=""><span class="lineCounter-0-0-15">118</span></div><br><div class="line-0-0-16 " data-content="  /* private fields for tracking */"><span class="lineCounter-0-0-15">119</span>  <span class="token comment">/* private fields for tracking */</span></div><br><div class="line-0-0-16 " data-content="  @track advanceButtonText = MARK_COMPLETED;"><span class="lineCounter-0-0-15 prim">120</span>  @track advanceButtonText <span class="token operator">=</span> <span class="token constant">MARK_COMPLETED</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="  @track closedStatuses = [];"><span class="lineCounter-0-0-15">121</span>  @track closedStatuses <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="  @track currentClosedStatus;"><span class="lineCounter-0-0-15">122</span>  @track currentClosedStatus<span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="  @track customCloseDateSelected = false;"><span class="lineCounter-0-0-15">123</span>  @track customCloseDateSelected <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="  @track dateValue;"><span class="lineCounter-0-0-15">124</span>  @track dateValue<span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="  @track status;"><span class="lineCounter-0-0-15 prim">125</span>  @track status<span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="  @track storedStatus;"><span class="lineCounter-0-0-15">126</span>  @track storedStatus<span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="  @track visibleStatuses = [];"><span class="lineCounter-0-0-15">127</span>  @track visibleStatuses <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content=""><span class="lineCounter-0-0-15">128</span></div><br><div class="line-0-0-16 " data-content="  //truly private fields"><span class="lineCounter-0-0-15">129</span>  <span class="token comment">//truly private fields</span></div><br><div class="line-0-0-16 " data-content="  _hasRendered = false;"><span class="lineCounter-0-0-15 prim">130</span>  _hasRendered <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="  _statuses;"><span class="lineCounter-0-0-15">131</span>  _statuses<span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content=""><span class="lineCounter-0-0-15">132</span></div><br><div class="line-0-0-16 " data-content="  get hasData() {"><span class="lineCounter-0-0-15">133</span>  <span class="token keyword">get</span> <span class="token function">hasData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-16 " data-content="    return !!(this.storedStatus &amp;&amp; this.visibleStatuses.length > 0);"><span class="lineCounter-0-0-15">134</span>    <span class="token keyword">return</span> <span class="token operator">!</span><span class="token operator">!</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>storedStatus <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>visibleStatuses<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="  }"><span class="lineCounter-0-0-15 prim">135</span>  <span class="token punctuation">}</span></div><br><div class="line-0-0-16 " data-content=""><span class="lineCounter-0-0-15">136</span></div><br><div class="line-0-0-16 " data-content="  //truly private methods, only called from within this file"><span class="lineCounter-0-0-15">137</span>  <span class="token comment">//truly private methods, only called from within this file</span></div><br><div class="line-0-0-16 " data-content="  _handleWireCallback = ({ data, error, cb }) => {"><span class="lineCounter-0-0-15">138</span>  <span class="token function-variable function">_handleWireCallback</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> data<span class="token punctuation">,</span> error<span class="token punctuation">,</span> cb <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-16 " data-content="    if (error) console.error(error);"><span class="lineCounter-0-0-15">139</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="    else if (data) {"><span class="lineCounter-0-0-15 prim">140</span>    <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-16 " data-content="      cb(data);"><span class="lineCounter-0-0-15">141</span>      <span class="token function">cb</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="    }"><span class="lineCounter-0-0-15">142</span>    <span class="token punctuation">}</span></div><br><div class="line-0-0-16 " data-content="  };"><span class="lineCounter-0-0-15">143</span>  <span class="token punctuation">}</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content=""><span class="lineCounter-0-0-15">144</span></div><br><div class="line-0-0-16 " data-content="  _getPathItemFromStatus(status) {"><span class="lineCounter-0-0-15 prim">145</span>  <span class="token function">_getPathItemFromStatus</span><span class="token punctuation">(</span><span class="token parameter">status</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-16 " data-content="    const ariaSelected = !!this.storedStatus"><span class="lineCounter-0-0-15">146</span>    <span class="token keyword">const</span> ariaSelected <span class="token operator">=</span> <span class="token operator">!</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>storedStatus</div><br><div class="line-0-0-16 " data-content="      ? this.storedStatus.includes(status)"><span class="lineCounter-0-0-15">147</span>      <span class="token operator">?</span> <span class="token keyword">this</span><span class="token punctuation">.</span>storedStatus<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>status<span class="token punctuation">)</span></div><br><div class="line-0-0-16 " data-content="      : false;"><span class="lineCounter-0-0-15">148</span>      <span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="    const isCurrent = !!this.status ? this.status.includes(status) : false;"><span class="lineCounter-0-0-15">149</span>    <span class="token keyword">const</span> isCurrent <span class="token operator">=</span> <span class="token operator">!</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>status <span class="token operator">?</span> <span class="token keyword">this</span><span class="token punctuation">.</span>status<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>status<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="    const classList = [&quot;slds-path__item&quot;];"><span class="lineCounter-0-0-15 prim">150</span>    <span class="token keyword">const</span> classList <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">"slds-path__item"</span><span class="token punctuation">]</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="    if (ariaSelected) {"><span class="lineCounter-0-0-15">151</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>ariaSelected<span class="token punctuation">)</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-16 " data-content="      classList.push(&quot;slds-is-active&quot;);"><span class="lineCounter-0-0-15">152</span>      classList<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">"slds-is-active"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="    } else {"><span class="lineCounter-0-0-15">153</span>    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-16 " data-content="      //we'll end up fixing this in rendered callback"><span class="lineCounter-0-0-15">154</span>      <span class="token comment">//we'll end up fixing this in rendered callback</span></div><br><div class="line-0-0-16 " data-content="      classList.push(&quot;slds-is-incomplete&quot;);"><span class="lineCounter-0-0-15 prim">155</span>      classList<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">"slds-is-incomplete"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="    }"><span class="lineCounter-0-0-15">156</span>    <span class="token punctuation">}</span></div><br><div class="line-0-0-16 " data-content="    if (isCurrent) {"><span class="lineCounter-0-0-15">157</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>isCurrent<span class="token punctuation">)</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-16 " data-content="      classList.push(&quot;slds-is-current&quot;);"><span class="lineCounter-0-0-15">158</span>      classList<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">"slds-is-current"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="    }"><span class="lineCounter-0-0-15">159</span>    <span class="token punctuation">}</span></div><br><div class="line-0-0-16 " data-content="    return {"><span class="lineCounter-0-0-15 prim">160</span>    <span class="token keyword">return</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-16 " data-content="      //same here"><span class="lineCounter-0-0-15">161</span>      <span class="token comment">//same here</span></div><br><div class="line-0-0-16 " data-content="      ariaSelected: false,"><span class="lineCounter-0-0-15">162</span>      ariaSelected<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span></div><br><div class="line-0-0-16 " data-content="      class: classList.join(&quot; &quot;),"><span class="lineCounter-0-0-15">163</span>      <span class="token keyword">class</span><span class="token operator">:</span> classList<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">,</span></div><br><div class="line-0-0-16 " data-content="      label: status,"><span class="lineCounter-0-0-15">164</span>      label<span class="token operator">:</span> status<span class="token punctuation">,</span></div><br><div class="line-0-0-16 " data-content="    };"><span class="lineCounter-0-0-15 prim">165</span>    <span class="token punctuation">}</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="  }"><span class="lineCounter-0-0-15">166</span>  <span class="token punctuation">}</span></div><br><div class="line-0-0-16 " data-content=""><span class="lineCounter-0-0-15">167</span></div><br><div class="line-0-0-16 " data-content="  _getLeadValueOrDefault(data, val) {"><span class="lineCounter-0-0-15">168</span>  <span class="token function">_getLeadValueOrDefault</span><span class="token punctuation">(</span><span class="token parameter">data<span class="token punctuation">,</span> val</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-16 " data-content="    return data ? data.fields[val].displayValue : &quot;&quot;;"><span class="lineCounter-0-0-15">169</span>    <span class="token keyword">return</span> data <span class="token operator">?</span> data<span class="token punctuation">.</span>fields<span class="token punctuation">[</span>val<span class="token punctuation">]</span><span class="token punctuation">.</span>displayValue <span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="  }"><span class="lineCounter-0-0-15 prim">170</span>  <span class="token punctuation">}</span></div><br><div class="line-0-0-16 " data-content=""><span class="lineCounter-0-0-15">171</span></div><br><div class="line-0-0-16 " data-content="  _updateVisibleStatuses() {"><span class="lineCounter-0-0-15">172</span>  <span class="token function">_updateVisibleStatuses</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-16 " data-content="    //update the shown statuses based on the selection"><span class="lineCounter-0-0-15">173</span>    <span class="token comment">//update the shown statuses based on the selection</span></div><br><div class="line-0-0-16 " data-content="    const newStatuses = [];"><span class="lineCounter-0-0-15">174</span>    <span class="token keyword">const</span> newStatuses <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="    for (let index = 0; index < this.visibleStatuses.length; index++) {"><span class="lineCounter-0-0-15 prim">175</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> index <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> index <span class="token operator">&lt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>visibleStatuses<span class="token punctuation">.</span>length<span class="token punctuation">;</span> index<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-16 " data-content="      const status = this.visibleStatuses[index];"><span class="lineCounter-0-0-15">176</span>      <span class="token keyword">const</span> status <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>visibleStatuses<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="      const pathItem = this._getPathItemFromStatus(status.label);"><span class="lineCounter-0-0-15">177</span>      <span class="token keyword">const</span> pathItem <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_getPathItemFromStatus</span><span class="token punctuation">(</span>status<span class="token punctuation">.</span>label<span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="      if (this.status !== this.storedStatus || pathItem.label !== this.status) {"><span class="lineCounter-0-0-15">178</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>status <span class="token operator">!==</span> <span class="token keyword">this</span><span class="token punctuation">.</span>storedStatus <span class="token operator">||</span> pathItem<span class="token punctuation">.</span>label <span class="token operator">!==</span> <span class="token keyword">this</span><span class="token punctuation">.</span>status<span class="token punctuation">)</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-16 " data-content="        pathItem.class = pathItem.class"><span class="lineCounter-0-0-15">179</span>        pathItem<span class="token punctuation">.</span>class <span class="token operator">=</span> pathItem<span class="token punctuation">.</span>class</div><br><div class="line-0-0-16 " data-content="          .replace(&quot;slds-is-complete&quot;, &quot;&quot;)"><span class="lineCounter-0-0-15 prim">180</span>          <span class="token class-name"><span class="token punctuation">.</span>replace</span><span class="token punctuation">(</span><span class="token string">"slds-is-complete"</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span></div><br><div class="line-0-0-16 " data-content="          .replace(&quot;  &quot;, &quot; &quot;);"><span class="lineCounter-0-0-15">181</span>          <span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">"  "</span><span class="token punctuation">,</span> <span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="      }"><span class="lineCounter-0-0-15">182</span>      <span class="token punctuation">}</span></div><br><div class="line-0-0-16 " data-content="      newStatuses.push(pathItem);"><span class="lineCounter-0-0-15">183</span>      newStatuses<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>pathItem<span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="    }"><span class="lineCounter-0-0-15">184</span>    <span class="token punctuation">}</span></div><br><div class="line-0-0-16 " data-content="    this.visibleStatuses = newStatuses;"><span class="lineCounter-0-0-15 prim">185</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>visibleStatuses <span class="token operator">=</span> newStatuses<span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="  }"><span class="lineCounter-0-0-15">186</span>  <span class="token punctuation">}</span></div><br><div class="line-0-0-16 " data-content="}"><span class="lineCounter-0-0-15 prim">187</span><span class="token punctuation">}</span></div><br></code></pre><p>That's nearly <em>all</em> of the JavaScript required to get the appropriate Path data showing on the page. The only thing that's missing from the controller that's shown are the reactive handlers -- for listening to click events, as well as how to handle what goes on in the modal. Before we return to that (much easier) territory, let's conclude the dependent <code>@wire</code> section by saying that though the use of the component's lifecycle methods to completely prepare the appropriate Lead Statuses and properties means that the code is not as terse as it could be, it remains the idiomatic way to massage independent streams of data in your components into the format required by your markup.</p><h2 id="returning-to-the-custom-path" class="heading-0-0-12"><span class="anchor-0-0-13" data-ignore-text=""><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span>Returning To The Custom Path</h2><p>The interesting thing about the markup is that it all gets slotted into the existing modal. If there were additional chances for code re-use in this component, they would likely come from the <code>&lt;li&gt;</code> elements present within the Path. You could definitely work on generalizing the Path itself; because for this example I wanted to show how to group "Closed" statuses together, the logic ends up being fairly coupled to the underlying Path markup. Certainly this could be generalized to accept an <code>SObject</code> type and a picklist field to accomplish the same thing with greater re-use for all picklist fields with "Closed" values -- alternatively, stripping out the grouping section would bring you to a fully re-usable Path component that could be used and customized for any picklist field.</p><p>I'm also using a <code>CustomDate__c</code> field (included in the linked repository) to show what entering a date required to save a Lead in a certain "Closed" status would look like:</p><pre class=""><code class="html code-0-0-14" tabindex="0"><span class="wmbar-0-0-17"><span></span><span></span><span></span><span></span></span><div class="line-0-0-16 " data-content="<template>"><span class="lineCounter-0-0-15 prim">1</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span></div><br><div class="line-0-0-16 " data-content="  <c-modal"><span class="lineCounter-0-0-15">2</span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>c-modal</span></span></div><br><div class="line-0-0-16 " data-content="    modal-header=&quot;Close Status Required&quot;"><span class="lineCounter-0-0-15">3</span>    <span class="token attr-name">modal-header</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Close Status Required<span class="token punctuation">"</span></span></div><br><div class="line-0-0-16 " data-content="    modal-tagline=&quot;Set the specific close status to proceed!&quot;"><span class="lineCounter-0-0-15">4</span>    <span class="token attr-name">modal-tagline</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Set the specific close status to proceed!<span class="token punctuation">"</span></span></div><br><div class="line-0-0-16 " data-content="    modal-save-handler=&quot;{modalSaveHandler}&quot;"><span class="lineCounter-0-0-15 prim">5</span>    <span class="token attr-name">modal-save-handler</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>{modalSaveHandler}<span class="token punctuation">"</span></span></div><br><div class="line-0-0-16 " data-content="  >"><span class="lineCounter-0-0-15">6</span>  <span class="token punctuation">&gt;</span></div><br><div class="line-0-0-16 " data-content="    <template if:true=&quot;{hasData}&quot;>"><span class="lineCounter-0-0-15">7</span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name"><span class="token namespace">if:</span>true</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>{hasData}<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span></div><br><div class="line-0-0-16 " data-content="      <article class=&quot;slds-card&quot; slot=&quot;body&quot;>"><span class="lineCounter-0-0-15">8</span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>article</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>slds-card<span class="token punctuation">"</span></span> <span class="token attr-name">slot</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>body<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span></div><br><div class="line-0-0-16 " data-content="        <div class=&quot;slds-card__body slds-card__body_inner&quot;>"><span class="lineCounter-0-0-15">9</span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>slds-card__body slds-card__body_inner<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span></div><br><div class="line-0-0-16 " data-content="          <div class=&quot;slds-path&quot;>"><span class="lineCounter-0-0-15 prim">10</span>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>slds-path<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span></div><br><div class="line-0-0-16 " data-content="            <div class=&quot;slds-grid slds-path__track&quot;>"><span class="lineCounter-0-0-15">11</span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>slds-grid slds-path__track<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span></div><br><div class="line-0-0-16 " data-content="              <div class=&quot;slds-grid slds-path__scroller-container&quot;>"><span class="lineCounter-0-0-15">12</span>              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>slds-grid slds-path__scroller-container<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span></div><br><div class="line-0-0-16 " data-content="                <div"><span class="lineCounter-0-0-15">13</span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span></span></div><br><div class="line-0-0-16 " data-content="                  class=&quot;slds-path__scroller&quot;"><span class="lineCounter-0-0-15">14</span>                  <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>slds-path__scroller<span class="token punctuation">"</span></span></div><br><div class="line-0-0-16 " data-content="                  tabindex=&quot;-1&quot;"><span class="lineCounter-0-0-15 prim">15</span>                  <span class="token attr-name">tabindex</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>-1<span class="token punctuation">"</span></span></div><br><div class="line-0-0-16 " data-content="                  role=&quot;application&quot;"><span class="lineCounter-0-0-15">16</span>                  <span class="token attr-name">role</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>application<span class="token punctuation">"</span></span></div><br><div class="line-0-0-16 " data-content="                >"><span class="lineCounter-0-0-15">17</span>                <span class="token punctuation">&gt;</span></div><br><div class="line-0-0-16 " data-content="                  <div class=&quot;slds-path__scroller_inner&quot;>"><span class="lineCounter-0-0-15">18</span>                  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>slds-path__scroller_inner<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span></div><br><div class="line-0-0-16 " data-content="                    <ul"><span class="lineCounter-0-0-15">19</span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span></span></div><br><div class="line-0-0-16 " data-content="                      class=&quot;slds-path__nav&quot;"><span class="lineCounter-0-0-15 prim">20</span>                      <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>slds-path__nav<span class="token punctuation">"</span></span></div><br><div class="line-0-0-16 " data-content="                      role=&quot;listbox&quot;"><span class="lineCounter-0-0-15">21</span>                      <span class="token attr-name">role</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>listbox<span class="token punctuation">"</span></span></div><br><div class="line-0-0-16 " data-content="                      aria-orientation=&quot;horizontal&quot;"><span class="lineCounter-0-0-15">22</span>                      <span class="token attr-name">aria-orientation</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>horizontal<span class="token punctuation">"</span></span></div><br><div class="line-0-0-16 " data-content="                    >"><span class="lineCounter-0-0-15">23</span>                    <span class="token punctuation">&gt;</span></div><br><div class="line-0-0-16 " data-content="                      <template for:each=&quot;{visibleStatuses}&quot; for:item=&quot;stage&quot;>"><span class="lineCounter-0-0-15">24</span>                      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name"><span class="token namespace">for:</span>each</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>{visibleStatuses}<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">for:</span>item</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>stage<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span></div><br><div class="line-0-0-16 " data-content="                        <li"><span class="lineCounter-0-0-15 prim">25</span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span></span></div><br><div class="line-0-0-16 " data-content="                          class=&quot;{stage.class}&quot;"><span class="lineCounter-0-0-15">26</span>                          <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>{stage.class}<span class="token punctuation">"</span></span></div><br><div class="line-0-0-16 " data-content="                          role=&quot;presentation&quot;"><span class="lineCounter-0-0-15">27</span>                          <span class="token attr-name">role</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>presentation<span class="token punctuation">"</span></span></div><br><div class="line-0-0-16 " data-content="                          key=&quot;{stage.label}&quot;"><span class="lineCounter-0-0-15">28</span>                          <span class="token attr-name">key</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>{stage.label}<span class="token punctuation">"</span></span></div><br><div class="line-0-0-16 " data-content="                          onclick=&quot;{handleStatusClick}&quot;"><span class="lineCounter-0-0-15">29</span>                          <span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>{handleStatusClick}<span class="token punctuation">"</span></span></div><br><div class="line-0-0-16 " data-content="                        >"><span class="lineCounter-0-0-15 prim">30</span>                        <span class="token punctuation">&gt;</span></div><br><div class="line-0-0-16 " data-content="                          <a"><span class="lineCounter-0-0-15">31</span>                          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span></span></div><br><div class="line-0-0-16 " data-content="                            class=&quot;slds-path__link&quot;"><span class="lineCounter-0-0-15">32</span>                            <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>slds-path__link<span class="token punctuation">"</span></span></div><br><div class="line-0-0-16 " data-content="                            tabindex=&quot;-1&quot;"><span class="lineCounter-0-0-15">33</span>                            <span class="token attr-name">tabindex</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>-1<span class="token punctuation">"</span></span></div><br><div class="line-0-0-16 " data-content="                            role=&quot;option&quot;"><span class="lineCounter-0-0-15">34</span>                            <span class="token attr-name">role</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>option<span class="token punctuation">"</span></span></div><br><div class="line-0-0-16 " data-content="                            title=&quot;{stage.label}&quot;"><span class="lineCounter-0-0-15 prim">35</span>                            <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>{stage.label}<span class="token punctuation">"</span></span></div><br><div class="line-0-0-16 " data-content="                            aria-selected=&quot;{stage.ariaSelected}&quot;"><span class="lineCounter-0-0-15">36</span>                            <span class="token attr-name">aria-selected</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>{stage.ariaSelected}<span class="token punctuation">"</span></span></div><br><div class="line-0-0-16 " data-content="                          >"><span class="lineCounter-0-0-15">37</span>                          <span class="token punctuation">&gt;</span></div><br><div class="line-0-0-16 " data-content="                            <span class=&quot;slds-path__stage&quot;>"><span class="lineCounter-0-0-15">38</span>                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>slds-path__stage<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span></div><br><div class="line-0-0-16 " data-content="                              <lightning-icon"><span class="lineCounter-0-0-15">39</span>                              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>lightning-icon</span></span></div><br><div class="line-0-0-16 " data-content="                                variant=&quot;bare&quot;"><span class="lineCounter-0-0-15 prim">40</span>                                <span class="token attr-name">variant</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>bare<span class="token punctuation">"</span></span></div><br><div class="line-0-0-16 " data-content="                                class=&quot;slds-button__icon&quot;"><span class="lineCounter-0-0-15">41</span>                                <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>slds-button__icon<span class="token punctuation">"</span></span></div><br><div class="line-0-0-16 " data-content="                                icon-name=&quot;utility:check&quot;"><span class="lineCounter-0-0-15">42</span>                                <span class="token attr-name">icon-name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>utility:check<span class="token punctuation">"</span></span></div><br><div class="line-0-0-16 " data-content="                                size=&quot;x-small&quot;"><span class="lineCounter-0-0-15">43</span>                                <span class="token attr-name">size</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>x-small<span class="token punctuation">"</span></span></div><br><div class="line-0-0-16 " data-content="                                alternative-text=&quot;{stage}&quot;"><span class="lineCounter-0-0-15">44</span>                                <span class="token attr-name">alternative-text</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>{stage}<span class="token punctuation">"</span></span></div><br><div class="line-0-0-16 " data-content="                              ></lightning-icon>"><span class="lineCounter-0-0-15 prim">45</span>                              <span class="token punctuation">&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>lightning-icon</span><span class="token punctuation">&gt;</span></span></div><br><div class="line-0-0-16 " data-content="                            </span>"><span class="lineCounter-0-0-15">46</span>                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span></div><br><div class="line-0-0-16 " data-content="                            <span class=&quot;slds-path__title&quot;>{stage.label}</span>"><span class="lineCounter-0-0-15">47</span>                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>slds-path__title<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>{stage.label}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span></div><br><div class="line-0-0-16 " data-content="                          </a>"><span class="lineCounter-0-0-15">48</span>                          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span></div><br><div class="line-0-0-16 " data-content="                        </li>"><span class="lineCounter-0-0-15">49</span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span></div><br><div class="line-0-0-16 " data-content="                      </template>"><span class="lineCounter-0-0-15 prim">50</span>                      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span></div><br><div class="line-0-0-16 " data-content="                    </ul>"><span class="lineCounter-0-0-15">51</span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span></div><br><div class="line-0-0-16 " data-content="                  </div>"><span class="lineCounter-0-0-15">52</span>                  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></div><br><div class="line-0-0-16 " data-content="                </div>"><span class="lineCounter-0-0-15">53</span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></div><br><div class="line-0-0-16 " data-content="                <template if:true=&quot;{showAdvanceButton}&quot;>"><span class="lineCounter-0-0-15">54</span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name"><span class="token namespace">if:</span>true</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>{showAdvanceButton}<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span></div><br><div class="line-0-0-16 " data-content="                  <div class=&quot;slds-grid slds-path__action&quot;>"><span class="lineCounter-0-0-15 prim">55</span>                  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>slds-grid slds-path__action<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span></div><br><div class="line-0-0-16 " data-content="                    <lightning-button"><span class="lineCounter-0-0-15">56</span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>lightning-button</span></span></div><br><div class="line-0-0-16 " data-content="                      class=&quot;slds-path__mark-complete slds-no-flex slds-m-horizontal__medium&quot;"><span class="lineCounter-0-0-15">57</span>                      <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>slds-path__mark-complete slds-no-flex slds-m-horizontal__medium<span class="token punctuation">"</span></span></div><br><div class="line-0-0-16 " data-content="                      variant=&quot;brand&quot;"><span class="lineCounter-0-0-15">58</span>                      <span class="token attr-name">variant</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>brand<span class="token punctuation">"</span></span></div><br><div class="line-0-0-16 " data-content="                      icon-name=&quot;{pathActionIconName}&quot;"><span class="lineCounter-0-0-15">59</span>                      <span class="token attr-name">icon-name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>{pathActionIconName}<span class="token punctuation">"</span></span></div><br><div class="line-0-0-16 " data-content="                      onclick=&quot;{handleAdvanceButtonClick}&quot;"><span class="lineCounter-0-0-15 prim">60</span>                      <span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>{handleAdvanceButtonClick}<span class="token punctuation">"</span></span></div><br><div class="line-0-0-16 " data-content="                      title=&quot;{advanceButtonText}&quot;"><span class="lineCounter-0-0-15">61</span>                      <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>{advanceButtonText}<span class="token punctuation">"</span></span></div><br><div class="line-0-0-16 " data-content="                      label=&quot;{advanceButtonText}&quot;"><span class="lineCounter-0-0-15">62</span>                      <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>{advanceButtonText}<span class="token punctuation">"</span></span></div><br><div class="line-0-0-16 " data-content="                    >"><span class="lineCounter-0-0-15">63</span>                    <span class="token punctuation">&gt;</span></div><br><div class="line-0-0-16 " data-content="                    </lightning-button>"><span class="lineCounter-0-0-15">64</span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>lightning-button</span><span class="token punctuation">&gt;</span></span></div><br><div class="line-0-0-16 " data-content="                  </div>"><span class="lineCounter-0-0-15 prim">65</span>                  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></div><br><div class="line-0-0-16 " data-content="                </template>"><span class="lineCounter-0-0-15">66</span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span></div><br><div class="line-0-0-16 " data-content="              </div>"><span class="lineCounter-0-0-15">67</span>              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></div><br><div class="line-0-0-16 " data-content="            </div>"><span class="lineCounter-0-0-15">68</span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></div><br><div class="line-0-0-16 " data-content="          </div>"><span class="lineCounter-0-0-15">69</span>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></div><br><div class="line-0-0-16 " data-content="        </div>"><span class="lineCounter-0-0-15 prim">70</span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></div><br><div class="line-0-0-16 " data-content="      </article>"><span class="lineCounter-0-0-15">71</span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>article</span><span class="token punctuation">&gt;</span></span></div><br><div class="line-0-0-16 " data-content="      <div slot=&quot;modalContent&quot;>"><span class="lineCounter-0-0-15">72</span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">slot</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>modalContent<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span></div><br><div class="line-0-0-16 " data-content="        <template if:true=&quot;{showClosedOptions}&quot;>"><span class="lineCounter-0-0-15">73</span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name"><span class="token namespace">if:</span>true</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>{showClosedOptions}<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span></div><br><div class="line-0-0-16 " data-content="          <lightning-combobox"><span class="lineCounter-0-0-15">74</span>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>lightning-combobox</span></span></div><br><div class="line-0-0-16 " data-content="            class=&quot;slds-m-around_small slds-form-element&quot;"><span class="lineCounter-0-0-15 prim">75</span>            <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>slds-m-around_small slds-form-element<span class="token punctuation">"</span></span></div><br><div class="line-0-0-16 " data-content="            name=&quot;status&quot;"><span class="lineCounter-0-0-15">76</span>            <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>status<span class="token punctuation">"</span></span></div><br><div class="line-0-0-16 " data-content="            label=&quot;Status&quot;"><span class="lineCounter-0-0-15">77</span>            <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Status<span class="token punctuation">"</span></span></div><br><div class="line-0-0-16 " data-content="            value=&quot;{currentClosedStatus}&quot;"><span class="lineCounter-0-0-15">78</span>            <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>{currentClosedStatus}<span class="token punctuation">"</span></span></div><br><div class="line-0-0-16 " data-content="            placeholder=&quot;Select Closed Status&quot;"><span class="lineCounter-0-0-15">79</span>            <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Select Closed Status<span class="token punctuation">"</span></span></div><br><div class="line-0-0-16 " data-content="            options=&quot;{closedStatuses}&quot;"><span class="lineCounter-0-0-15 prim">80</span>            <span class="token attr-name">options</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>{closedStatuses}<span class="token punctuation">"</span></span></div><br><div class="line-0-0-16 " data-content="            onchange=&quot;{handleClosedStatusChange}&quot;"><span class="lineCounter-0-0-15">81</span>            <span class="token attr-name">onchange</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>{handleClosedStatusChange}<span class="token punctuation">"</span></span></div><br><div class="line-0-0-16 " data-content="            required"><span class="lineCounter-0-0-15">82</span>            <span class="token attr-name">required</span></div><br><div class="line-0-0-16 " data-content="            message-when-value-missing=&quot;Please select a closed status&quot;"><span class="lineCounter-0-0-15">83</span>            <span class="token attr-name">message-when-value-missing</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Please select a closed status<span class="token punctuation">"</span></span></div><br><div class="line-0-0-16 " data-content="          ></lightning-combobox>"><span class="lineCounter-0-0-15">84</span>          <span class="token punctuation">&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>lightning-combobox</span><span class="token punctuation">&gt;</span></span></div><br><div class="line-0-0-16 " data-content="          <template if:true=&quot;{customCloseDateSelected}&quot;>"><span class="lineCounter-0-0-15 prim">85</span>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name"><span class="token namespace">if:</span>true</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>{customCloseDateSelected}<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span></div><br><div class="line-0-0-16 " data-content="            <p>"><span class="lineCounter-0-0-15">86</span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span></div><br><div class="line-0-0-16 " data-content="              The date you use below will cause the lead to reopen in the"><span class="lineCounter-0-0-15">87</span>              The date you use below will cause the lead to reopen in the</div><br><div class="line-0-0-16 " data-content="              future. Assignment rules will be rerun at the time; if you are"><span class="lineCounter-0-0-15">88</span>              future. Assignment rules will be rerun at the time; if you are</div><br><div class="line-0-0-16 " data-content="              still the owner, you will be notified, otherwise the new owner"><span class="lineCounter-0-0-15">89</span>              still the owner, you will be notified, otherwise the new owner</div><br><div class="line-0-0-16 " data-content="              will be."><span class="lineCounter-0-0-15 prim">90</span>              will be.</div><br><div class="line-0-0-16 " data-content="            </p>"><span class="lineCounter-0-0-15">91</span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span></div><br><div class="line-0-0-16 " data-content="            <lightning-input"><span class="lineCounter-0-0-15">92</span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>lightning-input</span></span></div><br><div class="line-0-0-16 " data-content="              class=&quot;slds-form-element slds-m-around_small&quot;"><span class="lineCounter-0-0-15">93</span>              <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>slds-form-element slds-m-around_small<span class="token punctuation">"</span></span></div><br><div class="line-0-0-16 " data-content="              label=&quot;Reopen Date&quot;"><span class="lineCounter-0-0-15">94</span>              <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Reopen Date<span class="token punctuation">"</span></span></div><br><div class="line-0-0-16 " data-content="              type=&quot;date&quot;"><span class="lineCounter-0-0-15 prim">95</span>              <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>date<span class="token punctuation">"</span></span></div><br><div class="line-0-0-16 " data-content="              date-style=&quot;short&quot;"><span class="lineCounter-0-0-15">96</span>              <span class="token attr-name">date-</span><span class="token style-attr language-css"><span class="token attr-name"><span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value">short</span><span class="token punctuation">"</span></span></div><br><div class="line-0-0-16 " data-content="              value=&quot;{dateValue}&quot;"><span class="lineCounter-0-0-15">97</span>              <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>{dateValue}<span class="token punctuation">"</span></span></div><br><div class="line-0-0-16 " data-content="              onchange=&quot;{handleDateOnChange}&quot;"><span class="lineCounter-0-0-15">98</span>              <span class="token attr-name">onchange</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>{handleDateOnChange}<span class="token punctuation">"</span></span></div><br><div class="line-0-0-16 " data-content="              required"><span class="lineCounter-0-0-15">99</span>              <span class="token attr-name">required</span></div><br><div class="line-0-0-16 " data-content="            >"><span class="lineCounter-0-0-15 prim">100</span>            <span class="token punctuation">&gt;</span></div><br><div class="line-0-0-16 " data-content="            </lightning-input>"><span class="lineCounter-0-0-15">101</span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>lightning-input</span><span class="token punctuation">&gt;</span></span></div><br><div class="line-0-0-16 " data-content="            <p>"><span class="lineCounter-0-0-15">102</span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span></div><br><div class="line-0-0-16 " data-content="              Once you're done selecting the date, click &quot;Save&quot; to proceed!"><span class="lineCounter-0-0-15">103</span>              Once you're done selecting the date, click "Save" to proceed!</div><br><div class="line-0-0-16 " data-content="            </p>"><span class="lineCounter-0-0-15">104</span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span></div><br><div class="line-0-0-16 " data-content="          </template>"><span class="lineCounter-0-0-15 prim">105</span>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span></div><br><div class="line-0-0-16 " data-content="        </template>"><span class="lineCounter-0-0-15">106</span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span></div><br><div class="line-0-0-16 " data-content="      </div>"><span class="lineCounter-0-0-15">107</span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></div><br><div class="line-0-0-16 " data-content="    </template>"><span class="lineCounter-0-0-15">108</span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span></div><br><div class="line-0-0-16 " data-content="    <template if:false=&quot;{hasData}&quot;>"><span class="lineCounter-0-0-15">109</span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name"><span class="token namespace">if:</span>false</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>{hasData}<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span></div><br><div class="line-0-0-16 " data-content="      <lightning-spinner"><span class="lineCounter-0-0-15 prim">110</span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>lightning-spinner</span></span></div><br><div class="line-0-0-16 " data-content="        alternative-text=&quot;Loading&quot;"><span class="lineCounter-0-0-15">111</span>        <span class="token attr-name">alternative-text</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Loading<span class="token punctuation">"</span></span></div><br><div class="line-0-0-16 " data-content="        size=&quot;small&quot;"><span class="lineCounter-0-0-15">112</span>        <span class="token attr-name">size</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>small<span class="token punctuation">"</span></span></div><br><div class="line-0-0-16 " data-content="      ></lightning-spinner>"><span class="lineCounter-0-0-15">113</span>      <span class="token punctuation">&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>lightning-spinner</span><span class="token punctuation">&gt;</span></span></div><br><div class="line-0-0-16 " data-content="    </template>"><span class="lineCounter-0-0-15">114</span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span></div><br><div class="line-0-0-16 " data-content="  </c-modal>"><span class="lineCounter-0-0-15 prim">115</span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>c-modal</span><span class="token punctuation">&gt;</span></span></div><br><div class="line-0-0-16 " data-content="</template>"><span class="lineCounter-0-0-15 prim">116</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span></div><br></code></pre><p>Of the things in the JavaScript LWC controller that we haven't explored but are referenced in the markup:</p><pre class=""><code class="javascript code-0-0-14" tabindex="0"><span class="wmbar-0-0-17"><span></span><span></span><span></span><span></span></span><div class="line-0-0-16 " data-content="modalSaveHandler = async (event) => {"><span class="lineCounter-0-0-15 prim">1</span><span class="token function-variable function">modalSaveHandler</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-16 " data-content="  event.stopPropagation();"><span class="lineCounter-0-0-15">2</span>  event<span class="token punctuation">.</span><span class="token function">stopPropagation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="  event.preventDefault();"><span class="lineCounter-0-0-15">3</span>  event<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content=""><span class="lineCounter-0-0-15">4</span></div><br><div class="line-0-0-16 " data-content="  //one of the nicer code snippets shown"><span class="lineCounter-0-0-15 prim">5</span>  <span class="token comment">//one of the nicer code snippets shown</span></div><br><div class="line-0-0-16 " data-content="  //in the LWC docs - display an error on any"><span class="lineCounter-0-0-15">6</span>  <span class="token comment">//in the LWC docs - display an error on any</span></div><br><div class="line-0-0-16 " data-content="  //field marked required but improperly filled out"><span class="lineCounter-0-0-15">7</span>  <span class="token comment">//field marked required but improperly filled out</span></div><br><div class="line-0-0-16 " data-content="  const allValid = ["><span class="lineCounter-0-0-15">8</span>  <span class="token keyword">const</span> allValid <span class="token operator">=</span> <span class="token punctuation">[</span></div><br><div class="line-0-0-16 " data-content="    ...this.template.querySelectorAll('.slds-form-element')"><span class="lineCounter-0-0-15">9</span>    <span class="token operator">...</span><span class="token keyword">this</span><span class="token punctuation">.</span>template<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">'.slds-form-element'</span><span class="token punctuation">)</span></div><br><div class="line-0-0-16 " data-content="  ].reduce((validSoFar, formElement) => {"><span class="lineCounter-0-0-15 prim">10</span>  <span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">validSoFar<span class="token punctuation">,</span> formElement</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-16 " data-content="    formElement.reportValidity();"><span class="lineCounter-0-0-15">11</span>    formElement<span class="token punctuation">.</span><span class="token function">reportValidity</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="    return validSoFar &amp;&amp; formElement.checkValidity();"><span class="lineCounter-0-0-15">12</span>    <span class="token keyword">return</span> validSoFar <span class="token operator">&amp;&amp;</span> formElement<span class="token punctuation">.</span><span class="token function">checkValidity</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="  });"><span class="lineCounter-0-0-15">13</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="  if (allValid) {"><span class="lineCounter-0-0-15">14</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span>allValid<span class="token punctuation">)</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-16 " data-content="    this._toggleModal();"><span class="lineCounter-0-0-15 prim">15</span>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_toggleModal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="    await this._saveLeadAndToast();"><span class="lineCounter-0-0-15">16</span>    <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_saveLeadAndToast</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="  }"><span class="lineCounter-0-0-15">17</span>  <span class="token punctuation">}</span></div><br><div class="line-0-0-16 " data-content="};"><span class="lineCounter-0-0-15">18</span><span class="token punctuation">}</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content=""><span class="lineCounter-0-0-15">19</span></div><br><div class="line-0-0-16 " data-content="handleStatusClick(event) {"><span class="lineCounter-0-0-15 prim">20</span><span class="token function">handleStatusClick</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-16 " data-content="  event.stopPropagation();"><span class="lineCounter-0-0-15">21</span>  event<span class="token punctuation">.</span><span class="token function">stopPropagation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="  //update the stored status, but don't update the record"><span class="lineCounter-0-0-15">22</span>  <span class="token comment">//update the stored status, but don't update the record</span></div><br><div class="line-0-0-16 " data-content="  //till the save button is clicked"><span class="lineCounter-0-0-15">23</span>  <span class="token comment">//till the save button is clicked</span></div><br><div class="line-0-0-16 " data-content="  const updatedStatusName = event.target.textContent;"><span class="lineCounter-0-0-15">24</span>  <span class="token keyword">const</span> updatedStatusName <span class="token operator">=</span> event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>textContent<span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="  this.advanceButtonText ="><span class="lineCounter-0-0-15 prim">25</span>  <span class="token keyword">this</span><span class="token punctuation">.</span>advanceButtonText <span class="token operator">=</span></div><br><div class="line-0-0-16 " data-content="    updatedStatusName === this.status ? COMPLETED : 'Mark As Current Status';"><span class="lineCounter-0-0-15">26</span>    updatedStatusName <span class="token operator">===</span> <span class="token keyword">this</span><span class="token punctuation">.</span>status <span class="token operator">?</span> <span class="token constant">COMPLETED</span> <span class="token operator">:</span> <span class="token string">'Mark As Current Status'</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="  this.storedStatus = updatedStatusName;"><span class="lineCounter-0-0-15">27</span>  <span class="token keyword">this</span><span class="token punctuation">.</span>storedStatus <span class="token operator">=</span> updatedStatusName<span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content=""><span class="lineCounter-0-0-15">28</span></div><br><div class="line-0-0-16 " data-content="  if (this.status !== this.storedStatus) {"><span class="lineCounter-0-0-15">29</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>status <span class="token operator">!==</span> <span class="token keyword">this</span><span class="token punctuation">.</span>storedStatus<span class="token punctuation">)</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-16 " data-content="    this._updateVisibleStatuses();"><span class="lineCounter-0-0-15 prim">30</span>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_updateVisibleStatuses</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="  }"><span class="lineCounter-0-0-15">31</span>  <span class="token punctuation">}</span></div><br><div class="line-0-0-16 " data-content=""><span class="lineCounter-0-0-15">32</span></div><br><div class="line-0-0-16 " data-content="  if (this.storedStatus === CLOSED) {"><span class="lineCounter-0-0-15">33</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>storedStatus <span class="token operator">===</span> <span class="token constant">CLOSED</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-16 " data-content="    this._advanceToClosedStatus();"><span class="lineCounter-0-0-15">34</span>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_advanceToClosedStatus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="  }"><span class="lineCounter-0-0-15 prim">35</span>  <span class="token punctuation">}</span></div><br><div class="line-0-0-16 " data-content="}"><span class="lineCounter-0-0-15">36</span><span class="token punctuation">}</span></div><br><div class="line-0-0-16 " data-content=""><span class="lineCounter-0-0-15">37</span></div><br><div class="line-0-0-16 " data-content="handleClosedStatusChange(event) {"><span class="lineCounter-0-0-15">38</span><span class="token function">handleClosedStatusChange</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-16 " data-content="  const newClosedStatus = event.target.value;"><span class="lineCounter-0-0-15">39</span>  <span class="token keyword">const</span> newClosedStatus <span class="token operator">=</span> event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="  this.currentClosedStatus = newClosedStatus;"><span class="lineCounter-0-0-15 prim">40</span>  <span class="token keyword">this</span><span class="token punctuation">.</span>currentClosedStatus <span class="token operator">=</span> newClosedStatus<span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="  this.storedStatus = newClosedStatus;"><span class="lineCounter-0-0-15">41</span>  <span class="token keyword">this</span><span class="token punctuation">.</span>storedStatus <span class="token operator">=</span> newClosedStatus<span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="  this.customCloseDateSelected = this.storedStatus === SPECIAL_STATUS;"><span class="lineCounter-0-0-15">42</span>  <span class="token keyword">this</span><span class="token punctuation">.</span>customCloseDateSelected <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>storedStatus <span class="token operator">===</span> <span class="token constant">SPECIAL_STATUS</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="}"><span class="lineCounter-0-0-15">43</span><span class="token punctuation">}</span></div><br><div class="line-0-0-16 " data-content=""><span class="lineCounter-0-0-15">44</span></div><br><div class="line-0-0-16 " data-content="handleDateOnChange(event) {"><span class="lineCounter-0-0-15 prim">45</span><span class="token function">handleDateOnChange</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-16 " data-content="  this.dateValue = event.target.value;"><span class="lineCounter-0-0-15">46</span>  <span class="token keyword">this</span><span class="token punctuation">.</span>dateValue <span class="token operator">=</span> event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="}"><span class="lineCounter-0-0-15">47</span><span class="token punctuation">}</span></div><br><div class="line-0-0-16 " data-content=""><span class="lineCounter-0-0-15">48</span></div><br><div class="line-0-0-16 " data-content="async handleAdvanceButtonClick(event) {"><span class="lineCounter-0-0-15">49</span><span class="token keyword">async</span> <span class="token function">handleAdvanceButtonClick</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-16 " data-content="  event.stopPropagation();"><span class="lineCounter-0-0-15 prim">50</span>  event<span class="token punctuation">.</span><span class="token function">stopPropagation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content=""><span class="lineCounter-0-0-15">51</span></div><br><div class="line-0-0-16 " data-content="  if ("><span class="lineCounter-0-0-15">52</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span></div><br><div class="line-0-0-16 " data-content="    this.status === this.storedStatus &amp;&amp;"><span class="lineCounter-0-0-15">53</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token keyword">this</span><span class="token punctuation">.</span>storedStatus <span class="token operator">&amp;&amp;</span></div><br><div class="line-0-0-16 " data-content="    !this.storedStatus.includes(CLOSED)"><span class="lineCounter-0-0-15">54</span>    <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>storedStatus<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token constant">CLOSED</span><span class="token punctuation">)</span></div><br><div class="line-0-0-16 " data-content="  ) {"><span class="lineCounter-0-0-15 prim">55</span>  <span class="token punctuation">)</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-16 " data-content="    const nextStatusIndex ="><span class="lineCounter-0-0-15">56</span>    <span class="token keyword">const</span> nextStatusIndex <span class="token operator">=</span></div><br><div class="line-0-0-16 " data-content="      this.visibleStatuses.findIndex("><span class="lineCounter-0-0-15">57</span>      <span class="token keyword">this</span><span class="token punctuation">.</span>visibleStatuses<span class="token punctuation">.</span><span class="token function">findIndex</span><span class="token punctuation">(</span></div><br><div class="line-0-0-16 " data-content="        (visibleStatus) => visibleStatus.label === this.status"><span class="lineCounter-0-0-15">58</span>        <span class="token punctuation">(</span><span class="token parameter">visibleStatus</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> visibleStatus<span class="token punctuation">.</span>label <span class="token operator">===</span> <span class="token keyword">this</span><span class="token punctuation">.</span>status</div><br><div class="line-0-0-16 " data-content="      ) + 1;"><span class="lineCounter-0-0-15">59</span>      <span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="    this.storedStatus = this.visibleStatuses[nextStatusIndex].label;"><span class="lineCounter-0-0-15 prim">60</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>storedStatus <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>visibleStatuses<span class="token punctuation">[</span>nextStatusIndex<span class="token punctuation">]</span><span class="token punctuation">.</span>label<span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="    if (nextStatusIndex === this.visibleStatuses.length - 1) {"><span class="lineCounter-0-0-15">61</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>nextStatusIndex <span class="token operator">===</span> <span class="token keyword">this</span><span class="token punctuation">.</span>visibleStatuses<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-16 " data-content="      //the last status should always be &quot;Closed&quot;"><span class="lineCounter-0-0-15">62</span>      <span class="token comment">//the last status should always be "Closed"</span></div><br><div class="line-0-0-16 " data-content="      //and the modal should be popped"><span class="lineCounter-0-0-15">63</span>      <span class="token comment">//and the modal should be popped</span></div><br><div class="line-0-0-16 " data-content="      this._advanceToClosedStatus();"><span class="lineCounter-0-0-15">64</span>      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_advanceToClosedStatus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="    } else {"><span class="lineCounter-0-0-15 prim">65</span>    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-16 " data-content="      await this._saveLeadAndToast();"><span class="lineCounter-0-0-15">66</span>      <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_saveLeadAndToast</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="    }"><span class="lineCounter-0-0-15">67</span>    <span class="token punctuation">}</span></div><br><div class="line-0-0-16 " data-content="  } else if (this.storedStatus.includes(CLOSED)) {"><span class="lineCounter-0-0-15">68</span>  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>storedStatus<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token constant">CLOSED</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-16 " data-content="    //curses! they closed the modal"><span class="lineCounter-0-0-15">69</span>    <span class="token comment">//curses! they closed the modal</span></div><br><div class="line-0-0-16 " data-content="    //let's re-open it"><span class="lineCounter-0-0-15 prim">70</span>    <span class="token comment">//let's re-open it</span></div><br><div class="line-0-0-16 " data-content="    this._advanceToClosedStatus();"><span class="lineCounter-0-0-15">71</span>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_advanceToClosedStatus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="  } else {"><span class="lineCounter-0-0-15">72</span>  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-16 " data-content="    await this._saveLeadAndToast();"><span class="lineCounter-0-0-15">73</span>    <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_saveLeadAndToast</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="  }"><span class="lineCounter-0-0-15">74</span>  <span class="token punctuation">}</span></div><br><div class="line-0-0-16 " data-content="}"><span class="lineCounter-0-0-15 prim">75</span><span class="token punctuation">}</span></div><br><div class="line-0-0-16 " data-content=""><span class="lineCounter-0-0-15">76</span></div><br><div class="line-0-0-16 " data-content="//truly private methods, only called from within this file"><span class="lineCounter-0-0-15">77</span><span class="token comment">//truly private methods, only called from within this file</span></div><br><div class="line-0-0-16 " data-content="_advanceToClosedStatus() {"><span class="lineCounter-0-0-15">78</span><span class="token function">_advanceToClosedStatus</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-16 " data-content="  this.advanceButtonText = CLOSED_CTA;"><span class="lineCounter-0-0-15">79</span>  <span class="token keyword">this</span><span class="token punctuation">.</span>advanceButtonText <span class="token operator">=</span> <span class="token constant">CLOSED_CTA</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="  this.storedStatus = this.currentClosedStatus;"><span class="lineCounter-0-0-15 prim">80</span>  <span class="token keyword">this</span><span class="token punctuation">.</span>storedStatus <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>currentClosedStatus<span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="  this.showClosedOptions = true;"><span class="lineCounter-0-0-15">81</span>  <span class="token keyword">this</span><span class="token punctuation">.</span>showClosedOptions <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="  this._toggleModal();"><span class="lineCounter-0-0-15">82</span>  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_toggleModal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="}"><span class="lineCounter-0-0-15">83</span><span class="token punctuation">}</span></div><br><div class="line-0-0-16 " data-content=""><span class="lineCounter-0-0-15">84</span></div><br><div class="line-0-0-16 " data-content="_toggleModal() {"><span class="lineCounter-0-0-15 prim">85</span><span class="token function">_toggleModal</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-16 " data-content="  this.template.querySelector('c-modal').toggleModal();"><span class="lineCounter-0-0-15">86</span>  <span class="token keyword">this</span><span class="token punctuation">.</span>template<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'c-modal'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toggleModal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="}"><span class="lineCounter-0-0-15">87</span><span class="token punctuation">}</span></div><br><div class="line-0-0-16 " data-content=""><span class="lineCounter-0-0-15">88</span></div><br><div class="line-0-0-16 " data-content="async _saveLeadAndToast() {"><span class="lineCounter-0-0-15">89</span><span class="token keyword">async</span> <span class="token function">_saveLeadAndToast</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-16 " data-content="  let error;"><span class="lineCounter-0-0-15 prim">90</span>  <span class="token keyword">let</span> error<span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="  try {"><span class="lineCounter-0-0-15">91</span>  <span class="token keyword">try</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-16 " data-content="    this.status = this.storedStatus;"><span class="lineCounter-0-0-15">92</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>status <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>storedStatus<span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="    const recordToUpdate = {"><span class="lineCounter-0-0-15">93</span>    <span class="token keyword">const</span> recordToUpdate <span class="token operator">=</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-16 " data-content="      fields: {"><span class="lineCounter-0-0-15">94</span>      fields<span class="token operator">:</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-16 " data-content="        Id: this.recordId,"><span class="lineCounter-0-0-15 prim">95</span>        Id<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>recordId<span class="token punctuation">,</span></div><br><div class="line-0-0-16 " data-content="        Status: this.status,"><span class="lineCounter-0-0-15">96</span>        Status<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>status<span class="token punctuation">,</span></div><br><div class="line-0-0-16 " data-content="        CustomDate__c: null"><span class="lineCounter-0-0-15">97</span>        CustomDate__c<span class="token operator">:</span> <span class="token keyword">null</span></div><br><div class="line-0-0-16 " data-content="      }"><span class="lineCounter-0-0-15">98</span>      <span class="token punctuation">}</span></div><br><div class="line-0-0-16 " data-content="    };"><span class="lineCounter-0-0-15">99</span>    <span class="token punctuation">}</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="    if (this.dateValue &amp;&amp; this.status === SPECIAL_STATUS) {"><span class="lineCounter-0-0-15 prim">100</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>dateValue <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token constant">SPECIAL_STATUS</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-16 " data-content="      recordToUpdate.fields.CustomDate__c = this.dateValue;"><span class="lineCounter-0-0-15">101</span>      recordToUpdate<span class="token punctuation">.</span>fields<span class="token punctuation">.</span>CustomDate__c <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>dateValue<span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="    }"><span class="lineCounter-0-0-15">102</span>    <span class="token punctuation">}</span></div><br><div class="line-0-0-16 " data-content="    await updateRecord(recordToUpdate);"><span class="lineCounter-0-0-15">103</span>    <span class="token keyword">await</span> <span class="token function">updateRecord</span><span class="token punctuation">(</span>recordToUpdate<span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="    this._updateVisibleStatuses();"><span class="lineCounter-0-0-15">104</span>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_updateVisibleStatuses</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="    this.advanceButtonText = MARK_COMPLETED;"><span class="lineCounter-0-0-15 prim">105</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>advanceButtonText <span class="token operator">=</span> <span class="token constant">MARK_COMPLETED</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="  } catch (err) {"><span class="lineCounter-0-0-15">106</span>  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-16 " data-content="    error = err;"><span class="lineCounter-0-0-15">107</span>    error <span class="token operator">=</span> err<span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="    console.error(err);"><span class="lineCounter-0-0-15">108</span>    console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="  }"><span class="lineCounter-0-0-15">109</span>  <span class="token punctuation">}</span></div><br><div class="line-0-0-16 " data-content="  //not crazy about this ternary"><span class="lineCounter-0-0-15 prim">110</span>  <span class="token comment">//not crazy about this ternary</span></div><br><div class="line-0-0-16 " data-content="  //but I'm even less crazy about the 6"><span class="lineCounter-0-0-15">111</span>  <span class="token comment">//but I'm even less crazy about the 6</span></div><br><div class="line-0-0-16 " data-content="  //extra lines that would be necessary for"><span class="lineCounter-0-0-15">112</span>  <span class="token comment">//extra lines that would be necessary for</span></div><br><div class="line-0-0-16 " data-content="  //a second object"><span class="lineCounter-0-0-15">113</span>  <span class="token comment">//a second object</span></div><br><div class="line-0-0-16 " data-content="  this.dispatchEvent("><span class="lineCounter-0-0-15">114</span>  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">dispatchEvent</span><span class="token punctuation">(</span></div><br><div class="line-0-0-16 " data-content="    new ShowToastEvent({"><span class="lineCounter-0-0-15 prim">115</span>    <span class="token keyword">new</span> <span class="token class-name">ShowToastEvent</span><span class="token punctuation">(</span><span class="token punctuation">{</span></div><br><div class="line-0-0-16 " data-content="      title: !error ? 'Success!' : 'Record failed to save',"><span class="lineCounter-0-0-15">116</span>      title<span class="token operator">:</span> <span class="token operator">!</span>error <span class="token operator">?</span> <span class="token string">'Success!'</span> <span class="token operator">:</span> <span class="token string">'Record failed to save'</span><span class="token punctuation">,</span></div><br><div class="line-0-0-16 " data-content="      variant: !error ? 'success' : 'error',"><span class="lineCounter-0-0-15">117</span>      variant<span class="token operator">:</span> <span class="token operator">!</span>error <span class="token operator">?</span> <span class="token string">'success'</span> <span class="token operator">:</span> <span class="token string">'error'</span><span class="token punctuation">,</span></div><br><div class="line-0-0-16 " data-content="      message: !error"><span class="lineCounter-0-0-15">118</span>      message<span class="token operator">:</span> <span class="token operator">!</span>error</div><br><div class="line-0-0-16 " data-content="        ? 'Record successfully updated!'"><span class="lineCounter-0-0-15">119</span>        <span class="token operator">?</span> <span class="token string">'Record successfully updated!'</span></div><br><div class="line-0-0-16 " data-content="        : `Record failed to save with message: ${JSON.stringify(error)}`"><span class="lineCounter-0-0-15 prim">120</span>        <span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Record failed to save with message: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span></div><br><div class="line-0-0-16 " data-content="    })"><span class="lineCounter-0-0-15">121</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span></div><br><div class="line-0-0-16 " data-content="  );"><span class="lineCounter-0-0-15">122</span>  <span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="  //in reality, LDS errors are a lot uglier and should be handled gracefully"><span class="lineCounter-0-0-15">123</span>  <span class="token comment">//in reality, LDS errors are a lot uglier and should be handled gracefully</span></div><br><div class="line-0-0-16 " data-content="  //I recommend the `reduceErrors` utils function from @tsalb/lwc-utils:"><span class="lineCounter-0-0-15">124</span>  <span class="token comment">//I recommend the `reduceErrors` utils function from @tsalb/lwc-utils:</span></div><br><div class="line-0-0-16 " data-content="  //https://github.com/tsalb/lwc-utils/blob/master/force-app/main/default/lwc/utils/utils.js"><span class="lineCounter-0-0-15 prim">125</span>  <span class="token comment">//https://github.com/tsalb/lwc-utils/blob/master/force-app/main/default/lwc/utils/utils.js</span></div><br><div class="line-0-0-16 " data-content="}"><span class="lineCounter-0-0-15 prim">126</span><span class="token punctuation">}</span></div><br></code></pre><p>So ... ~100 lines (including comments) of code to handle all listeners (and there are a lot of clickable elements in a Path component!), most of which are either simply reflecting event-level data to an underyling, <code>@track</code>'d property, <em>or</em> deal with saving the record / closing the modal. Maybe that seems like a lot. In practice, I consider the use of LDS (when appropriate / possible) beneficial since you're saving on the concomitant lines of code that would be dedicated to your Apex Controller and test class.</p><h2 id="what-does-the-custom-path-lwc-end-up-looking-like" class="heading-0-0-12"><span class="anchor-0-0-13" data-ignore-text=""><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span>What Does The Custom Path LWC End Up Looking Like?</h2><p>OK, OK -- what does it look like, at the end of the day? First of all, you can see that <a href="https://res.cloudinary.com/she-and-jim/video/upload/v1592765674/joys-of-apex-example-path.mp4">on render speed alone the custom Path component outperforms the vanilla Path component</a>. There's a noticeable flicker on the vanilla Path prior to the current status being shown.</p><p>Here's what the Path looks like in the background with the modal open after having selected a "Closed" status:</p><p><img src="/joys-of-apex/img/lwc-example-custom-lead-path-closed-not-expanded.png" alt="Showing the non-expanded modal state"></p><p>And then with the custom "Special Date" closed status selected (notice I'm using the vanilla component in the background to compare to 😅):</p><p><img src="/joys-of-apex/img/lwc-example-custom-lead-path-closed-expanded.png" alt="The expanded modal state"></p><p>Lastly, what it looks like mid-Path:</p><p><img src="/joys-of-apex/img/lwc-example-custom-lead-path-without-modal.png" alt="The Path by itself"></p><h2 id="conclusion" class="heading-0-0-12"><span class="anchor-0-0-13" data-ignore-text=""><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span>Conclusion</h2><p>I'm sure that there are still edge-cases to consider when it comes to creating a custom Path component. This exercise, unlike <a href="/joys-of-apex/lwc-composable-modal">the modal</a>, doesn't cover everything -- for example, on the Lead Flexipage, if you wanted to use this custom Path component but didn't have a Lightning Button / Quick Action or other drop-in alternative for lead conversion, the Path as stands still would need work.</p><p>If you'd like to see the code for the custom Path component, <a href="https://github.com/jamessimone/apex-mocks-stress-test/tree/lwc-path">I've pushed it to a branch here</a>.</p><p>Despite this, I hope it's been helpful to see how using building blocks like the composable modal can increase your iteration speed and ability to implement complex features by encapsulating complexity in each Lightning Web Component. Thanks for following along -- till next time!</p><div class="contentnav-0-0-7" data-no-search=""><a href="#path-overview" class="h2" data-content-highlight="path-overview">Path Overview</a><a href="#lightning-data-service-overview" class="h2" data-content-highlight="lightning-data-service-overview">Lightning Data Service Overview</a><a href="#loading-multiple-wire-methods-with-dependent-data-using-lds" class="h3" data-content-highlight="loading-multiple-wire-methods-with-dependent-data-using-lds">Loading Multiple @Wire Methods With Dependent Data Using LDS</a><a href="#the-dirty-way-to-call-lwc-wire-methods-with-dependent-data" class="h3" data-content-highlight="the-dirty-way-to-call-lwc-wire-methods-with-dependent-data">The Dirty Way To Call LWC @Wire Methods With Dependent Data</a><a href="#the-proper-way-to-deal-with-dependent-wire-data" class="h3" data-content-highlight="the-proper-way-to-deal-with-dependent-wire-data">The Proper Way To Deal With Dependent @Wire Data</a><a href="#returning-to-the-custom-path" class="h2" data-content-highlight="returning-to-the-custom-path">Returning To The Custom Path</a><a href="#what-does-the-custom-path-lwc-end-up-looking-like" class="h2" data-content-highlight="what-does-the-custom-path-lwc-end-up-looking-like">What Does The Custom Path LWC End Up Looking Like?</a><a href="#conclusion" class="h2" data-content-highlight="conclusion">Conclusion</a></div></div><div id="-codedoc-toc" class="toc-0-0-4"><div class="content-0-0-5"><p><a href="/joys-of-apex/">Home</a>
<a href="/joys-of-apex/apex-logging-service">Apex Logging Service</a>
<a href="/joys-of-apex/apex-object-oriented-basics">Apex Object-Oriented Basics</a>
<a href="/joys-of-apex/batchable-and-queueable-apex">Batchable And Queueable Apex</a>
<a href="/joys-of-apex/building-a-better-singleton">Building A Better Singleton</a>
<a href="/joys-of-apex/continuous-integration-with-sfdx">Continuous Integration With SFDX</a>
<a href="/joys-of-apex/dependency-injection-factory-pattern">Dependency Injection &amp; Factory Pattern</a>
<a href="/joys-of-apex/enum-apex-class-gotchas">Enum Apex Class Gotchas</a>
<a href="/joys-of-apex/extendable-apis">Extendable Apis</a>
<a href="/joys-of-apex/future-method-callout-callback">Future Methods, Callouts &amp; Callbacks</a>
<a href="/joys-of-apex/idiomatic-salesforce-apex">Idiomatic Salesforce Apex</a>
<a href="/joys-of-apex/intro">Introduction &amp; Testing Philosophy</a>
<a href="/joys-of-apex/lazy-iterators">Lazy Iterators</a>
<a href="/joys-of-apex/lightweight-trigger-handler">Lightweight Trigger Handler</a>
<a href="/joys-of-apex/lwc-composable-modal">LWC Composable Modal</a>
<a href="/joys-of-apex/lwc-composable-pagination">LWC Composable Pagination</a>
<a href="/joys-of-apex/lwc-custom-path">LWC Custom Lead Path</a>
<a href="/joys-of-apex/mocking-dml">Mocking DML</a>
<a href="/joys-of-apex/react-versus-lightning-web-components">React Versus Lightning Web Components</a>
<a href="/joys-of-apex/repository-pattern">Repository Pattern</a>
<a href="/joys-of-apex/sorting-and-performance-in-apex">Sorting And Performance In Apex</a>
<a href="/joys-of-apex/test-driven-development-example">Test Driven Development Example</a>
<a href="/joys-of-apex/writing-performant-apex-tests">Writing Performant Apex Tests</a></p><p><br><br></p><p><a href="https://www.jamessimone.net/">Read more tech articles</a></p></div></div><div class="footer-0-0-3"><div class="left"><script id="SZlQqDuPFq">(function(){function load(){if (window.__sdh_transport){window.__sdh_transport("SZlQqDuPFq", "BWW0vHR4333HbDOiwZ67JA==", {});} }; if (document.readyState == 'complete') load(); else window.addEventListener('load', load); })()</script></div><div class="main"><div class="inside"></div></div><div class="right"><script id="hVtWtGzmfK">(function(){function load(){if (window.__sdh_transport){window.__sdh_transport("hVtWtGzmfK", "6yEdMfRRlNsUBKSBOTazFg==", {});} }; if (document.readyState == 'complete') load(); else window.addEventListener('load', load); })()</script></div></div><script id="LXpZvBwksx">(function(){function load(){if (window.__sdh_transport){window.__sdh_transport("LXpZvBwksx", "wh9V9isakhdwzlz9ZUjvyw==", {"namespace":"/joys-of-apex"});} }; if (document.readyState == 'complete') load(); else window.addEventListener('load', load); })()</script></body></html>