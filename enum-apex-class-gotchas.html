<!DOCTYPE html><html><head><title>Joys Of Apex | Enum Apex Class Gotchas</title><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"><meta name="robots" content="index,follow"><meta name="theme-color" content="#212121"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><link rel="shortcut icon" href="/joys-of-apex/favicon.ico"><link href="https://fonts.googleapis.com/css?family=Hind:400,700&amp;display=swap" rel="stylesheet"><link href="https://fonts.googleapis.com/css?family=Source+Code+Pro:300,400&amp;display=swap" rel="stylesheet"><link href="https://fonts.googleapis.com/icon?family=Material+Icons|Material+Icons+Outlined" rel="stylesheet"><style>
      body, input, button {
        font-family: 'Hind', sans-serif;
      }

      code, .hljs {
        font-family: 'Source Code Pro', 'Courier New', Courier, monospace;
      }

      .icon-font {
        font-family: 'Material Icons';
        font-weight: normal;
        font-style: normal;
        font-size: 24px;  /* Preferred icon size */
        display: inline-block;
        line-height: 1;
        text-transform: none;
        letter-spacing: normal;
        word-wrap: normal;
        white-space: nowrap;
        direction: ltr;
      
        /* Support for all WebKit browsers. */
        -webkit-font-smoothing: antialiased;
        /* Support for Safari and Chrome. */
        text-rendering: optimizeLegibility;
      
        /* Support for Firefox. */
        -moz-osx-font-smoothing: grayscale;
      
        /* Support for IE. */
        font-feature-settings: 'liga';
      }

      .icon-font.outline {
        font-family: 'Material Icons Outlined';
      }
    </style><link href="/joys-of-apex/styles/codedoc-styles.css" rel="stylesheet"><script async="" defer="" src="/joys-of-apex/bundle/codedoc-bundle.js"></script><script>window.githubConfig={"repo":"james-coding-blog","user":"jamessimone"}</script><style>.container{padding-top: 0 !important}</style><style>#-codedoc-toc { backdrop-filter: blur(16px); -webkit-backdrop-filter: blur(16px) }</style><meta name="twitter:title" content="Joys Of Apex | Enum Apex Class Gotchas"><meta property="og:type" content="article"><meta property="og:title" content="Joys Of Apex | Enum Apex Class Gotchas"></head><body><header style="margin-left: 1rem">Read more at <a href="https://wwww.jamessimone.net">jamessimone.net</a></header><div id="-codedoc-container" class="container"><script>window.source = {"base":"posts","path":"enum-apex-class-gotchas.md","namespace":"/joys-of-apex","title":{"base":"Joys Of Apex","connector":" | "}}</script><div class="hero-0-0-8" style="margin-bottom: -156px"><img src="/joys-of-apex/img/the-joys-of-apex.png" class="image-0-0-9" data-hero=""><span class="caption-0-0-10"></span></div><marker><br>
<br>
<br>
<br>
<br>

</marker><h1 class="h-0-0-11 "><span style="color: green; 
      text-shadow: none; 
      font-size: 48px"><p>Enum Apex Class Gotchas</p></span></h1><p>The abstract enum class in Apex can be very helpful as a class-like object, but there are a few things you should keep in mind to avoid getting bitten by the use of enums. I was bitten hard by the use of enums recently, so I’d like to go a bit into depth on these shady, ill-documented characters; their usages, where they shine, and where you too might get into gray areas using them.</p><p>What are enums? That’s a tricky question to answer. Here's the official documentation description:</p><blockquote><p>An enum is an abstract data type with values that each take on exactly one of a finite set of identifiers that you specify. Enums are typically used to define a set of possible values that don’t otherwise have a numerical order, such as the suit of a card, or a particular season of the year.</p></blockquote><p>The easy way to think of them are compile-time "constants" that can be statically typed. They’re sort of like a list of static strings, in that sense, and they obey some interesting rules in addition to the basics:</p><p>Enums can be defined within a class or in a separate .cls file with the following notation:</p><pre class=""><code class="java code-0-0-14" tabindex="0"><span class="wmbar-0-0-17"><span></span><span></span><span></span><span></span></span><div class="line-0-0-16 " data-content="//or global"><span class="lineCounter-0-0-15 prim">1</span><span class="token comment">//or global</span></div><br><div class="line-0-0-16 " data-content="public enum ExampleEnum { FirstValue, SecondValue }"><span class="lineCounter-0-0-15 prim">2</span><span class="token keyword">public</span> <span class="token keyword">enum</span> <span class="token class-name">ExampleEnum</span> <span class="token punctuation">{</span> <span class="token class-name">FirstValue</span><span class="token punctuation">,</span> <span class="token class-name">SecondValue</span> <span class="token punctuation">}</span></div><br></code></pre><p>All enums have access to two methods: <code>name()</code> and <code>ordinal()</code> - name simply returns the string version of your enum instance, ordinal returns its index in the list.</p><ul><li>Using the above example, calling <code>ExampleEnum.SecondValue.name()</code> would return <code>SecondValue</code> as a String</li><li>Using the above example, calling <code>ExampleEnum.SecondValue.ordinal()</code> would return <code>1</code> as an Integer</li><li>You can also call <code>ExampleEnum.values()[0]</code> to return the Enum instance of <code>FirstValue</code></li></ul><div class="tabs-0-0-18"><script id="LatDdEfRCY">(function(){function load(){if (window.__sdh_transport){window.__sdh_transport("LatDdEfRCY", "T764P9zpaV5eSCd1H0okyw==", {});} }; if (document.readyState == 'complete') load(); else window.addEventListener('load', load); })()</script><div class="tab first selected" data-tab-title="Enum Notes"><p>Enums are sealed; you can’t add further methods or attributes to an enum. In other words ... they’re sort of a poor man’s class. The latest version of Java actually offers up a different take on this specifically for POJOs (plain old Java objects, sometimes called "beans" as well ... ): <a href="https://blogs.oracle.com/javamagazine/java-14-arrives-with-a-host-of-new-features#anchor_5">records</a>. I mention this specifically because Enums, like these new Record types, <em>are</em> a derivative of the plain Object class; they just can't be tested for using something like <code>instanceof</code> (try it yourself in Apex: <code>System.debug(LoggingLevel.ERROR instanceof Enum);</code> will sadly fail to compile), yet they do have hidden implementations of the basic Object methods, <code>hashCode()</code> and <code>equals()</code>.</p></div><div class="tab" data-tab-title="Enum Footnote"><p>The <a href="https://developer.salesforce.com/docs/atlas.en-us.apexcode.meta/apexcode/langCon_apex_collections_maps_keys_userdefined.htm">rather excellent documentation on using custom types as Map keys or within Sets</a> is for sure worth a read if you're looking to understand why these methods matter; it's also particularly important if you're looking to implement custom sorting using the <a href="https://developer.salesforce.com/docs/atlas.en-us.apexcode.meta/apexcode/apex_comparable.htm#apex_comparable">Comparable interface</a> in Apex</p></div></div><p>So why do people like to use enums? They offer better type-safety than the use of static strings. For another, they self-encapsulate their data; while the use of a static string potentially says something about what you’re interacting with, in reality the VALUE behind that string can change - either with reassignment, if the variable isn’t listed as final, or simply by changing the code.</p><p>Plus, in an if/else or switch statement, testing against an enum’s value gives the developer the pleasure of understanding immediately the statement being evaluated at hand. You don’t have to go look up the value of that string - it’s right there in front of you! It’s a great mechanism for capturing certain known conditions; while the docs use the example of Seasons, and cardinal directions, perhaps a better example might be types of errors returned from an API (if they come in string form ...).</p><p>So ... that all seems pretty good, actually. What are the downsides to enums, then?</p><h2 id="using-enums-in-data-classes" class="heading-0-0-12"><span class="anchor-0-0-13" data-ignore-text=""><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span>Using Enums In Data Classes</h2><p>For one -- you might be tempted (as I was) to use enums in other languages when communicating to Salesforce via API. Spoiler alert: that’s not gonna work. You CAN include an enum (or even a list of enum values!) as a property on an object being used in an Apex endpoint:</p><pre class=""><code class="java code-0-0-14" tabindex="0"><span class="wmbar-0-0-17"><span></span><span></span><span></span><span></span></span><div class="line-0-0-16 " data-content="public enum Season { WINTER, SPRING, SUMMER, FALL }"><span class="lineCounter-0-0-15 prim">1</span><span class="token keyword">public</span> <span class="token keyword">enum</span> <span class="token class-name">Season</span> <span class="token punctuation">{</span> WINTER<span class="token punctuation">,</span> SPRING<span class="token punctuation">,</span> SUMMER<span class="token punctuation">,</span> FALL <span class="token punctuation">}</span></div><br><div class="line-0-0-16 " data-content=""><span class="lineCounter-0-0-15">2</span></div><br><div class="line-0-0-16 " data-content="public class DataObject {"><span class="lineCounter-0-0-15">3</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DataObject</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-16 " data-content="    public Integer MyProperty { get; set }"><span class="lineCounter-0-0-15">4</span>    <span class="token keyword">public</span> <span class="token class-name">Integer</span> <span class="token class-name">MyProperty</span> <span class="token punctuation">{</span> get<span class="token punctuation">;</span> set <span class="token punctuation">}</span></div><br><div class="line-0-0-16 " data-content="    public Season MySeason { get; set; }"><span class="lineCounter-0-0-15 prim">5</span>    <span class="token keyword">public</span> <span class="token class-name">Season</span> <span class="token class-name">MySeason</span> <span class="token punctuation">{</span> get<span class="token punctuation">;</span> set<span class="token punctuation">;</span> <span class="token punctuation">}</span></div><br><div class="line-0-0-16 " data-content="}"><span class="lineCounter-0-0-15">6</span><span class="token punctuation">}</span></div><br><div class="line-0-0-16 " data-content=""><span class="lineCounter-0-0-15">7</span></div><br><div class="line-0-0-16 " data-content="//... in your web service"><span class="lineCounter-0-0-15">8</span><span class="token comment">//... in your web service</span></div><br><div class="line-0-0-16 " data-content="@HttpPost"><span class="lineCounter-0-0-15">9</span><span class="token annotation punctuation">@HttpPost</span></div><br><div class="line-0-0-16 " data-content="global static String post(DataObject data) {"><span class="lineCounter-0-0-15 prim">10</span>global <span class="token keyword">static</span> <span class="token class-name">String</span> <span class="token function">post</span><span class="token punctuation">(</span><span class="token class-name">DataObject</span> data<span class="token punctuation">)</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-16 " data-content="    //.. do something now that your object's been correctly deserialized"><span class="lineCounter-0-0-15">11</span>    <span class="token comment">//.. do something now that your object's been correctly deserialized</span></div><br><div class="line-0-0-16 " data-content="}"><span class="lineCounter-0-0-15">12</span><span class="token punctuation">}</span></div><br><div class="line-0-0-16 " data-content=""><span class="lineCounter-0-0-15 prim">13</span></div><br></code></pre><p>What you <strong>can't</strong>, under any circumstances do, is try to send an <em>enum</em> to Salesforce to represent that the corresponding <code>MySeason</code> on the data object. <em>You have to send a string instead</em>. Otherwise your service is going to throw an error trying to deserialize your object -- ouch. The reason for that will become abundantly clear as I walk you through this next part - the danger of using enums as key values in Map instances with Salesforce.</p><h2 id="enums-in-batchable--queueable-apex" class="heading-0-0-12"><span class="anchor-0-0-13" data-ignore-text=""><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span>Enums in Batchable &amp; Queueable Apex</h2><div class="tabs-0-0-18"><script id="xeYCCfpHYp">(function(){function load(){if (window.__sdh_transport){window.__sdh_transport("xeYCCfpHYp", "T764P9zpaV5eSCd1H0okyw==", {});} }; if (document.readyState == 'complete') load(); else window.addEventListener('load', load); })()</script><div class="tab first selected" data-tab-title="Batchable &amp; Queueable Apex"><p>When can we reference prior values in a new execution context? Within Batchable and Queueable Apex! Let’s dive in to a simple example (one of the reasons I loathe Batchable Apex -- this "simple" example takes up quite a bit of real estate):</p></div><div class="tab" data-tab-title="Stackexchange Footnote"><p>I probably account for 300+ of the (at this moment) 541 views of this <a href="https://salesforce.stackexchange.com/questions/158557/enums-as-map-keys-dont-work-in-batchable">question on the Salesforce Stack Exchange</a>, which first alerted me to this issue several years ago. I hadn't personally been bitten by this particular issue; at the time I was writing a custom equality library for Apex and I was trying to figure out if there was a graceful way to handle Enums.</p></div></div><pre class=""><code class="java code-0-0-14" tabindex="0"><span class="wmbar-0-0-17"><span></span><span></span><span></span><span></span></span><div class="line-0-0-16 " data-content="public class EnumBatchableExample implements Database.Batchable<SObject> {"><span class="lineCounter-0-0-15 prim">1</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">EnumBatchableExample</span> <span class="token keyword">implements</span> <span class="token class-name">Database</span><span class="token punctuation">.</span><span class="token class-name">Batchable</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">SObject</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span></div><br><div class="line-0-0-16 " data-content=""><span class="lineCounter-0-0-15">2</span></div><br><div class="line-0-0-16 " data-content="    public enum Direction { NORTH, SOUTH, EAST, WEST }"><span class="lineCounter-0-0-15">3</span>    <span class="token keyword">public</span> <span class="token keyword">enum</span> <span class="token class-name">Direction</span> <span class="token punctuation">{</span> NORTH<span class="token punctuation">,</span> SOUTH<span class="token punctuation">,</span> EAST<span class="token punctuation">,</span> WEST <span class="token punctuation">}</span></div><br><div class="line-0-0-16 " data-content=""><span class="lineCounter-0-0-15">4</span></div><br><div class="line-0-0-16 " data-content="    public class TestIterable implements Iterable<SObject> {"><span class="lineCounter-0-0-15 prim">5</span>    <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestIterable</span> <span class="token keyword">implements</span> <span class="token class-name">Iterable</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">SObject</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span></div><br><div class="line-0-0-16 " data-content="        public Iterator<SObject> Iterator() {"><span class="lineCounter-0-0-15">6</span>        <span class="token keyword">public</span> <span class="token class-name">Iterator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">SObject</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">Iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-16 " data-content="            return new List<SObject>().iterator();"><span class="lineCounter-0-0-15">7</span>            <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">SObject</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="        }"><span class="lineCounter-0-0-15">8</span>        <span class="token punctuation">}</span></div><br><div class="line-0-0-16 " data-content="    }"><span class="lineCounter-0-0-15">9</span>    <span class="token punctuation">}</span></div><br><div class="line-0-0-16 " data-content=""><span class="lineCounter-0-0-15 prim">10</span></div><br><div class="line-0-0-16 " data-content="    @testVisible private static Integer firstHashCode;"><span class="lineCounter-0-0-15">11</span>    <span class="token annotation punctuation">@testVisible</span> <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">Integer</span> firstHashCode<span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="    @testVisible private static Integer secondHashCode;"><span class="lineCounter-0-0-15">12</span>    <span class="token annotation punctuation">@testVisible</span> <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">Integer</span> secondHashCode<span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="    @testVisible private static Map<Direction, Integer> directionToNumber = new Map<Direction, Integer>();"><span class="lineCounter-0-0-15">13</span>    <span class="token annotation punctuation">@testVisible</span> <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Direction</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> directionToNumber <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Direction</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content=""><span class="lineCounter-0-0-15">14</span></div><br><div class="line-0-0-16 " data-content="    public Iterable<SObject> start(Database.BatchableContext bc) {"><span class="lineCounter-0-0-15 prim">15</span>    <span class="token keyword">public</span> <span class="token class-name">Iterable</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">SObject</span><span class="token punctuation">&gt;</span></span> <span class="token function">start</span><span class="token punctuation">(</span><span class="token class-name">Database</span><span class="token punctuation">.</span><span class="token class-name">BatchableContext</span> bc<span class="token punctuation">)</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-16 " data-content="        System.debug('Starting EnumBatchableExample');"><span class="lineCounter-0-0-15">16</span>        <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">'Starting EnumBatchableExample'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content=""><span class="lineCounter-0-0-15">17</span></div><br><div class="line-0-0-16 " data-content="        Direction north = Direction.NORTH;"><span class="lineCounter-0-0-15">18</span>        <span class="token class-name">Direction</span> north <span class="token operator">=</span> <span class="token class-name">Direction</span><span class="token punctuation">.</span>NORTH<span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="        Direction south = Direction.SOUTH;"><span class="lineCounter-0-0-15">19</span>        <span class="token class-name">Direction</span> south <span class="token operator">=</span> <span class="token class-name">Direction</span><span class="token punctuation">.</span>SOUTH<span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="        firstHashCode = north.hashCode();"><span class="lineCounter-0-0-15 prim">20</span>        firstHashCode <span class="token operator">=</span> north<span class="token punctuation">.</span><span class="token function">hashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="        secondHashCode = south.hashCode();"><span class="lineCounter-0-0-15">21</span>        secondHashCode <span class="token operator">=</span> south<span class="token punctuation">.</span><span class="token function">hashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="        directionToNumber.put(north, firstHashCode);"><span class="lineCounter-0-0-15">22</span>        directionToNumber<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>north<span class="token punctuation">,</span> firstHashCode<span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="        directionToNumber.put(south, secondHashCode);"><span class="lineCounter-0-0-15">23</span>        directionToNumber<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>south<span class="token punctuation">,</span> secondHashCode<span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content=""><span class="lineCounter-0-0-15">24</span></div><br><div class="line-0-0-16 " data-content="        System.debug('String version of north: ' + String.valueOf(Direction.NORTH));"><span class="lineCounter-0-0-15 prim">25</span>        <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">'String version of north: '</span> <span class="token operator">+</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token class-name">Direction</span><span class="token punctuation">.</span>NORTH<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="        System.debug('String verison of south: ' + String.valueOf(Direction.SOUTH));"><span class="lineCounter-0-0-15">26</span>        <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">'String verison of south: '</span> <span class="token operator">+</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token class-name">Direction</span><span class="token punctuation">.</span>SOUTH<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="        System.debug('String verison of this: ' + String.valueOf(this));"><span class="lineCounter-0-0-15">27</span>        <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">'String verison of this: '</span> <span class="token operator">+</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content=""><span class="lineCounter-0-0-15">28</span></div><br><div class="line-0-0-16 " data-content="        return new TestIterable();"><span class="lineCounter-0-0-15">29</span>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">TestIterable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="    }"><span class="lineCounter-0-0-15 prim">30</span>    <span class="token punctuation">}</span></div><br><div class="line-0-0-16 " data-content=""><span class="lineCounter-0-0-15">31</span></div><br><div class="line-0-0-16 " data-content="    public void execute(Database.BatchableContext bc, List<SObject> records) {}"><span class="lineCounter-0-0-15">32</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">execute</span><span class="token punctuation">(</span><span class="token class-name">Database</span><span class="token punctuation">.</span><span class="token class-name">BatchableContext</span> bc<span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">SObject</span><span class="token punctuation">&gt;</span></span> records<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></div><br><div class="line-0-0-16 " data-content=""><span class="lineCounter-0-0-15">33</span></div><br><div class="line-0-0-16 " data-content="    public void finish(Database.BatchableContext bc) {"><span class="lineCounter-0-0-15">34</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">finish</span><span class="token punctuation">(</span><span class="token class-name">Database</span><span class="token punctuation">.</span><span class="token class-name">BatchableContext</span> bc<span class="token punctuation">)</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-16 " data-content="        System.debug('Current map values: ' +  directionToNumber);"><span class="lineCounter-0-0-15 prim">35</span>        <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">'Current map values: '</span> <span class="token operator">+</span>  directionToNumber<span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="        System.debug('EnumBatchableExample finished');"><span class="lineCounter-0-0-15">36</span>        <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">'EnumBatchableExample finished'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="    }"><span class="lineCounter-0-0-15">37</span>    <span class="token punctuation">}</span></div><br><div class="line-0-0-16 " data-content="}"><span class="lineCounter-0-0-15 prim">38</span><span class="token punctuation">}</span></div><br></code></pre><p>And then the tests:</p><pre class=""><code class="java code-0-0-14" tabindex="0"><span class="wmbar-0-0-17"><span></span><span></span><span></span><span></span></span><div class="line-0-0-16 " data-content="@isTest"><span class="lineCounter-0-0-15 prim">1</span><span class="token annotation punctuation">@isTest</span></div><br><div class="line-0-0-16 " data-content="private class EnumBatchableExampleTests {"><span class="lineCounter-0-0-15">2</span><span class="token keyword">private</span> <span class="token keyword">class</span> <span class="token class-name">EnumBatchableExampleTests</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-16 " data-content="    static Integer northHashcode = EnumBatchableExample.Direction.NORTH.hashCode();"><span class="lineCounter-0-0-15">3</span>    <span class="token keyword">static</span> <span class="token class-name">Integer</span> northHashcode <span class="token operator">=</span> <span class="token class-name">EnumBatchableExample</span><span class="token punctuation">.</span><span class="token class-name">Direction</span><span class="token punctuation">.</span>NORTH<span class="token punctuation">.</span><span class="token function">hashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="    static Integer southHashcode = EnumBatchableExample.Direction.SOUTH.hashCode();"><span class="lineCounter-0-0-15">4</span>    <span class="token keyword">static</span> <span class="token class-name">Integer</span> southHashcode <span class="token operator">=</span> <span class="token class-name">EnumBatchableExample</span><span class="token punctuation">.</span><span class="token class-name">Direction</span><span class="token punctuation">.</span>SOUTH<span class="token punctuation">.</span><span class="token function">hashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content=""><span class="lineCounter-0-0-15 prim">5</span></div><br><div class="line-0-0-16 " data-content="    static EnumBatchableExample.Direction north = EnumBatchableExample.Direction.NORTH;"><span class="lineCounter-0-0-15">6</span>    <span class="token keyword">static</span> <span class="token class-name">EnumBatchableExample</span><span class="token punctuation">.</span><span class="token class-name">Direction</span> north <span class="token operator">=</span> <span class="token class-name">EnumBatchableExample</span><span class="token punctuation">.</span><span class="token class-name">Direction</span><span class="token punctuation">.</span>NORTH<span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="    static EnumBatchableExample.Direction south = EnumBatchableExample.Direction.SOUTH;"><span class="lineCounter-0-0-15">7</span>    <span class="token keyword">static</span> <span class="token class-name">EnumBatchableExample</span><span class="token punctuation">.</span><span class="token class-name">Direction</span> south <span class="token operator">=</span> <span class="token class-name">EnumBatchableExample</span><span class="token punctuation">.</span><span class="token class-name">Direction</span><span class="token punctuation">.</span>SOUTH<span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content=""><span class="lineCounter-0-0-15">8</span></div><br><div class="line-0-0-16 " data-content="    @TestSetup"><span class="lineCounter-0-0-15">9</span>    <span class="token annotation punctuation">@TestSetup</span></div><br><div class="line-0-0-16 " data-content="    static void setup() {"><span class="lineCounter-0-0-15 prim">10</span>    <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-16 " data-content="        //Ids consistently work as map keys ... is that because"><span class="lineCounter-0-0-15">11</span>        <span class="token comment">//Ids consistently work as map keys ... is that because</span></div><br><div class="line-0-0-16 " data-content="        //the hashCode is stable between execution contexts?"><span class="lineCounter-0-0-15">12</span>        <span class="token comment">//the hashCode is stable between execution contexts?</span></div><br><div class="line-0-0-16 " data-content="        insert new Account(Name = 'EnumBatchableTest');"><span class="lineCounter-0-0-15">13</span>        insert <span class="token keyword">new</span> <span class="token class-name">Account</span><span class="token punctuation">(</span><span class="token class-name">Name</span> <span class="token operator">=</span> <span class="token string">'EnumBatchableTest'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="    }"><span class="lineCounter-0-0-15">14</span>    <span class="token punctuation">}</span></div><br><div class="line-0-0-16 " data-content=""><span class="lineCounter-0-0-15 prim">15</span></div><br><div class="line-0-0-16 " data-content="    @isTest"><span class="lineCounter-0-0-15">16</span>    <span class="token annotation punctuation">@isTest</span></div><br><div class="line-0-0-16 " data-content="    static void it_should_retain_hashcode_references() {"><span class="lineCounter-0-0-15">17</span>    <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">it_should_retain_hashcode_references</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-16 " data-content="        Account acc = [SELECT Id FROM Account];"><span class="lineCounter-0-0-15">18</span>        <span class="token class-name">Account</span> acc <span class="token operator">=</span> <span class="token punctuation">[</span>SELECT <span class="token class-name">Id</span> FROM <span class="token class-name">Account</span><span class="token punctuation">]</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="        System.debug('Account Id\'s hashCode for this run: ' + ((Object)acc.Id).hashCode());"><span class="lineCounter-0-0-15">19</span>        <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">'Account Id\'s hashCode for this run: '</span> <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">)</span>acc<span class="token punctuation">.</span><span class="token class-name">Id</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">hashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content=""><span class="lineCounter-0-0-15 prim">20</span></div><br><div class="line-0-0-16 " data-content="        Database.Batchable<SObject> batchable = new EnumBatchableExample();"><span class="lineCounter-0-0-15">21</span>        <span class="token class-name">Database</span><span class="token punctuation">.</span><span class="token class-name">Batchable</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">SObject</span><span class="token punctuation">&gt;</span></span> batchable <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">EnumBatchableExample</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="        System.debug('Batchable\'s hashCode for this run: ' + ((Object)batchable).hashCode());"><span class="lineCounter-0-0-15">22</span>        <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">'Batchable\'s hashCode for this run: '</span> <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">)</span>batchable<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">hashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="        System.debug('Custom\'s hashCode for this run: ' + ((Object)new CustomHashCode()).hashCode());"><span class="lineCounter-0-0-15">23</span>        <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">'Custom\'s hashCode for this run: '</span> <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">)</span><span class="token keyword">new</span> <span class="token class-name">CustomHashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">hashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content=""><span class="lineCounter-0-0-15">24</span></div><br><div class="line-0-0-16 " data-content="        Test.startTest();"><span class="lineCounter-0-0-15 prim">25</span>        <span class="token class-name">Test</span><span class="token punctuation">.</span><span class="token function">startTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="        Database.executeBatch(batchable);"><span class="lineCounter-0-0-15">26</span>        <span class="token class-name">Database</span><span class="token punctuation">.</span><span class="token function">executeBatch</span><span class="token punctuation">(</span>batchable<span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="        Test.stopTest();"><span class="lineCounter-0-0-15">27</span>        <span class="token class-name">Test</span><span class="token punctuation">.</span><span class="token function">stopTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content=""><span class="lineCounter-0-0-15">28</span></div><br><div class="line-0-0-16 " data-content="        System.assertEquals(northHashcode, EnumBatchableExample.firstHashCode);"><span class="lineCounter-0-0-15">29</span>        <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">assertEquals</span><span class="token punctuation">(</span>northHashcode<span class="token punctuation">,</span> <span class="token class-name">EnumBatchableExample</span><span class="token punctuation">.</span>firstHashCode<span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="        System.assertEquals(southHashcode, EnumBatchableExample.Direction.SOUTH.hashCode());"><span class="lineCounter-0-0-15 prim">30</span>        <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">assertEquals</span><span class="token punctuation">(</span>southHashcode<span class="token punctuation">,</span> <span class="token class-name">EnumBatchableExample</span><span class="token punctuation">.</span><span class="token class-name">Direction</span><span class="token punctuation">.</span>SOUTH<span class="token punctuation">.</span><span class="token function">hashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="        System.assertEquals(true, EnumBatchableExample.directionToNumber.containsKey(north));"><span class="lineCounter-0-0-15">31</span>        <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">assertEquals</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token class-name">EnumBatchableExample</span><span class="token punctuation">.</span>directionToNumber<span class="token punctuation">.</span><span class="token function">containsKey</span><span class="token punctuation">(</span>north<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="        System.assertEquals(true, EnumBatchableExample.directionToNumber.containsKey(south));"><span class="lineCounter-0-0-15">32</span>        <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">assertEquals</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token class-name">EnumBatchableExample</span><span class="token punctuation">.</span>directionToNumber<span class="token punctuation">.</span><span class="token function">containsKey</span><span class="token punctuation">(</span>south<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="    }"><span class="lineCounter-0-0-15">33</span>    <span class="token punctuation">}</span></div><br><div class="line-0-0-16 " data-content=""><span class="lineCounter-0-0-15">34</span></div><br><div class="line-0-0-16 " data-content="    @isTest"><span class="lineCounter-0-0-15 prim">35</span>    <span class="token annotation punctuation">@isTest</span></div><br><div class="line-0-0-16 " data-content="    static void it_should_retain_hashcode_references_again() {"><span class="lineCounter-0-0-15">36</span>    <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">it_should_retain_hashcode_references_again</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-16 " data-content="        Account acc = [SELECT Id FROM Account];"><span class="lineCounter-0-0-15">37</span>        <span class="token class-name">Account</span> acc <span class="token operator">=</span> <span class="token punctuation">[</span>SELECT <span class="token class-name">Id</span> FROM <span class="token class-name">Account</span><span class="token punctuation">]</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="        System.debug('Account Id\'s hashCode for this run: ' + ((Object)acc.Id).hashCode());"><span class="lineCounter-0-0-15">38</span>        <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">'Account Id\'s hashCode for this run: '</span> <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">)</span>acc<span class="token punctuation">.</span><span class="token class-name">Id</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">hashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content=""><span class="lineCounter-0-0-15">39</span></div><br><div class="line-0-0-16 " data-content="        Database.Batchable<SObject> batchable = new EnumBatchableExample();"><span class="lineCounter-0-0-15 prim">40</span>        <span class="token class-name">Database</span><span class="token punctuation">.</span><span class="token class-name">Batchable</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">SObject</span><span class="token punctuation">&gt;</span></span> batchable <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">EnumBatchableExample</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="        System.debug('Batchable\'s hashCode for this run: ' + ((Object)batchable).hashCode());"><span class="lineCounter-0-0-15">41</span>        <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">'Batchable\'s hashCode for this run: '</span> <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">)</span>batchable<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">hashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="        System.debug('Custom\'s hashCode for this run: ' + ((Object)new CustomHashCode()).hashCode());"><span class="lineCounter-0-0-15">42</span>        <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">'Custom\'s hashCode for this run: '</span> <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">)</span><span class="token keyword">new</span> <span class="token class-name">CustomHashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">hashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content=""><span class="lineCounter-0-0-15">43</span></div><br><div class="line-0-0-16 " data-content="        Test.startTest();"><span class="lineCounter-0-0-15">44</span>        <span class="token class-name">Test</span><span class="token punctuation">.</span><span class="token function">startTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="        Database.executeBatch(batchable);"><span class="lineCounter-0-0-15 prim">45</span>        <span class="token class-name">Database</span><span class="token punctuation">.</span><span class="token function">executeBatch</span><span class="token punctuation">(</span>batchable<span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="        Test.stopTest();"><span class="lineCounter-0-0-15">46</span>        <span class="token class-name">Test</span><span class="token punctuation">.</span><span class="token function">stopTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content=""><span class="lineCounter-0-0-15">47</span></div><br><div class="line-0-0-16 " data-content="        System.assertEquals(northHashcode, EnumBatchableExample.firstHashCode);"><span class="lineCounter-0-0-15">48</span>        <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">assertEquals</span><span class="token punctuation">(</span>northHashcode<span class="token punctuation">,</span> <span class="token class-name">EnumBatchableExample</span><span class="token punctuation">.</span>firstHashCode<span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="        System.assertEquals(southHashcode, EnumBatchableExample.Direction.SOUTH.hashCode());"><span class="lineCounter-0-0-15">49</span>        <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">assertEquals</span><span class="token punctuation">(</span>southHashcode<span class="token punctuation">,</span> <span class="token class-name">EnumBatchableExample</span><span class="token punctuation">.</span><span class="token class-name">Direction</span><span class="token punctuation">.</span>SOUTH<span class="token punctuation">.</span><span class="token function">hashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="        System.assertEquals(true, EnumBatchableExample.directionToNumber.containsKey(north));"><span class="lineCounter-0-0-15 prim">50</span>        <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">assertEquals</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token class-name">EnumBatchableExample</span><span class="token punctuation">.</span>directionToNumber<span class="token punctuation">.</span><span class="token function">containsKey</span><span class="token punctuation">(</span>north<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="        System.assertEquals(true, EnumBatchableExample.directionToNumber.containsKey(south));"><span class="lineCounter-0-0-15">51</span>        <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">assertEquals</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token class-name">EnumBatchableExample</span><span class="token punctuation">.</span>directionToNumber<span class="token punctuation">.</span><span class="token function">containsKey</span><span class="token punctuation">(</span>south<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="    }"><span class="lineCounter-0-0-15">52</span>    <span class="token punctuation">}</span></div><br><div class="line-0-0-16 " data-content=""><span class="lineCounter-0-0-15">53</span></div><br><div class="line-0-0-16 " data-content="    private class CustomHashCode {"><span class="lineCounter-0-0-15">54</span>    <span class="token keyword">private</span> <span class="token keyword">class</span> <span class="token class-name">CustomHashCode</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-16 " data-content="        public Integer hashCode() {"><span class="lineCounter-0-0-15 prim">55</span>        <span class="token keyword">public</span> <span class="token class-name">Integer</span> <span class="token function">hashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-16 " data-content="            return 1;"><span class="lineCounter-0-0-15">56</span>            <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span></div><br><div class="line-0-0-16 " data-content="        }"><span class="lineCounter-0-0-15">57</span>        <span class="token punctuation">}</span></div><br><div class="line-0-0-16 " data-content="    }"><span class="lineCounter-0-0-15">58</span>    <span class="token punctuation">}</span></div><br><div class="line-0-0-16 " data-content="}"><span class="lineCounter-0-0-15 prim">59</span><span class="token punctuation">}</span></div><br></code></pre><p>Both of these tests pass, no problem, and there's no way to "force" the issue because with both Batchable &amp; Queueable Apex, you can't actually test the recursion of these jobs within tests. That said, I can show you the results:</p><p><img src="/joys-of-apex/img/apex-enum-debug-log.jpg" alt="Apex enum debug log"></p><p>There's a lot to go through:</p><ul><li>You can see that <strong>all</strong> the hashCode values change between execution contexts (with the exception of our hard-coded custom implementation). I expected that for everything except the Account Id variables</li><li>Debugging <code>String.valueOf(Direction.NORTH)</code> outputs the String: <code>NORTH</code></li><li>Debugging <code>String.valueOf(this)</code> within <code>EnumBatchableExample</code> outputs the name of the class, along with information about its &gt; &gt; member variables (none, in this case) and static variables</li></ul><p>Intuitively, we have to expect that ".equals(Object o)" is overridden on the SObject class. You can find more tantalizing info about how exactly SObject equality works in one very specific place in the Apex Developer Guide: <a href="https://developer.salesforce.com/docs/atlas.en-us.apexcode.meta/apexcode/langCon_apex_expressions_operators_understanding.htm">Understanding Expression Operators</a>. Look for the keywords "Equality Operator", which in tantalizing brevity details what happens when you call "==" on something within Apex. There's also a great ribbing on the SOQL team, for good measure.</p><h2 id="feeling-a-little-enum" class="heading-0-0-12"><span class="anchor-0-0-13" data-ignore-text=""><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span>Feeling A Little Enum</h2><p>TL;DR, what have we learned?</p><ul><li>Enums are abstract types that can't be extended.</li><li>You <strong>can</strong> send enum values to Apex endpoints, so long as the value you send is the string representation of the enum.</li><li>You <strong>can</strong> use enums as keys within a Set or Map, so long as you're aware of a few edge cases.</li><li>You <strong>can't</strong> assert for an enum's equality to a specific type using the <code>instanceof</code> operator</li><li>You <strong>can't</strong> pass enums to a class constructor except as a specific enum instance; there's no way to do something like:</li></ul><pre class=""><code class="java code-0-0-14" tabindex="0"><span class="wmbar-0-0-17"><span></span><span></span><span></span><span></span></span><div class="line-0-0-16 " data-content="public class MyClass {"><span class="lineCounter-0-0-15 prim">1</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyClass</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-16 " data-content="    public MyClass(Enum someEnum) {"><span class="lineCounter-0-0-15">2</span>    <span class="token keyword">public</span> <span class="token class-name">MyClass</span><span class="token punctuation">(</span><span class="token class-name">Enum</span> someEnum<span class="token punctuation">)</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-16 " data-content="        //some detecting of which enum it is here, I guess"><span class="lineCounter-0-0-15">3</span>        <span class="token comment">//some detecting of which enum it is here, I guess</span></div><br><div class="line-0-0-16 " data-content="    }"><span class="lineCounter-0-0-15">4</span>    <span class="token punctuation">}</span></div><br><div class="line-0-0-16 " data-content="}"><span class="lineCounter-0-0-15 prim">5</span><span class="token punctuation">}</span></div><br></code></pre><p>That's all for now, folks!</p><div class="contentnav-0-0-7" data-no-search=""><a href="#using-enums-in-data-classes" class="h2" data-content-highlight="using-enums-in-data-classes">Using Enums In Data Classes</a><a href="#enums-in-batchable--queueable-apex" class="h2" data-content-highlight="enums-in-batchable--queueable-apex">Enums in Batchable &amp; Queueable Apex</a><a href="#feeling-a-little-enum" class="h2" data-content-highlight="feeling-a-little-enum">Feeling A Little Enum</a></div></div><div id="-codedoc-toc" class="toc-0-0-4"><div class="content-0-0-5"><p><a href="/joys-of-apex/">Home</a>
<a href="/joys-of-apex/apex-logging-service">Apex Logging Service</a>
<a href="/joys-of-apex/apex-object-oriented-basics">Apex Object-Oriented Basics</a>
<a href="/joys-of-apex/batchable-and-queueable-apex">Batchable And Queueable Apex</a>
<a href="/joys-of-apex/building-a-better-singleton">Building A Better Singleton</a>
<a href="/joys-of-apex/continuous-integration-with-sfdx">Continuous Integration With SFDX</a>
<a href="/joys-of-apex/dependency-injection-factory-pattern">Dependency Injection &amp; Factory Pattern</a>
<a href="/joys-of-apex/enum-apex-class-gotchas">Enum Apex Class Gotchas</a>
<a href="/joys-of-apex/extendable-apis">Extendable Apis</a>
<a href="/joys-of-apex/future-method-callout-callback">Future Methods, Callouts &amp; Callbacks</a>
<a href="/joys-of-apex/idiomatic-salesforce-apex">Idiomatic Salesforce Apex</a>
<a href="/joys-of-apex/intro">Introduction &amp; Testing Philosophy</a>
<a href="/joys-of-apex/lazy-iterators">Lazy Iterators</a>
<a href="/joys-of-apex/lightweight-trigger-handler">Lightweight Trigger Handler</a>
<a href="/joys-of-apex/lwc-composable-pagination">LWC Composable Pagination</a>
<a href="/joys-of-apex/mocking-dml">Mocking DML</a>
<a href="/joys-of-apex/react-versus-lightning-web-components">React Versus Lightning Web Components</a>
<a href="/joys-of-apex/repository-pattern">Repository Pattern</a>
<a href="/joys-of-apex/sorting-and-performance-in-apex">Sorting And Performance In Apex</a>
<a href="/joys-of-apex/test-driven-development-example">Test Driven Development Example</a>
<a href="/joys-of-apex/writing-performance-apex-tests">Writing Performant Apex Tests</a></p><p><br><br></p><p><a href="https://www.jamessimone.net/">Read more tech articles</a></p></div></div><div class="footer-0-0-3"><div class="left"><script id="LtjgvSmqHS">(function(){function load(){if (window.__sdh_transport){window.__sdh_transport("LtjgvSmqHS", "BWW0vHR4333HbDOiwZ67JA==", {});} }; if (document.readyState == 'complete') load(); else window.addEventListener('load', load); })()</script></div><div class="main"><div class="inside"></div></div><div class="right"><script id="EHBSBVVnui">(function(){function load(){if (window.__sdh_transport){window.__sdh_transport("EHBSBVVnui", "6yEdMfRRlNsUBKSBOTazFg==", {});} }; if (document.readyState == 'complete') load(); else window.addEventListener('load', load); })()</script></div></div><script id="ulGMhkBXex">(function(){function load(){if (window.__sdh_transport){window.__sdh_transport("ulGMhkBXex", "wh9V9isakhdwzlz9ZUjvyw==", {"namespace":"/joys-of-apex"});} }; if (document.readyState == 'complete') load(); else window.addEventListener('load', load); })()</script></body></html>